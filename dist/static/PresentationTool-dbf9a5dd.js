import{aT as la,r as p,R as ys,aH as ua,b as Pe,aU as tt,j as m,aV as Yt,F as X,i as Be,aW as da,aX as $i,aY as fa,k as ve,o as oe,w as st,T as K,B as be,aZ as ha,a_ as pa,a$ as ma,b0 as ga,b1 as Ui,b2 as ya,b3 as _i,b4 as va,b5 as Lt,S as Le,b6 as zi,b7 as xa,b8 as ba,n as Ni,q as It,m as Ot,a5 as vs,b9 as wa,a0 as Zn,ba as xs,bb as Pa,bc as Sa,bd as fn,ac as Ta,be as Ca,bf as Aa,bg as ja,bh as $e,l as Ea,I as Va,bi as Ra,bj as Da,bk as Ma,bl as bs,bm as ka,t as La,bn as Ia,h as Oa,u as Ft,bo as Bt,bp as Rn,x as Fa,bq as Ba,br as $a,a4 as Ua,bs as Jn,a8 as _a,bt as za,Q as Na,aA as Wa,D as Ha,aL as ws,ae as Ps,ag as Ss,ai as Ka,aq as Ga,bu as qa,ah as Xa}from"./sanity-a3863ec7.js";import{q as Ya,c as Za}from"./DisplayedDocumentBroadcaster-df923b97.js";const Ja=la,Qa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qn=/_key\s*==\s*['"](.*)['"]/,ec=/^\d*:\d*$/;function ei(e){return typeof e=="number"||typeof e=="string"&&/^\[\d+\]$/.test(e)}function Zt(e){return typeof e=="string"?Qn.test(e.trim()):typeof e=="object"&&"_key"in e}function Ts(e){if(typeof e=="string"&&ec.test(e))return!0;if(!Array.isArray(e)||e.length!==2)return!1;const[t,n]=e;return(typeof t=="number"||t==="")&&(typeof n=="number"||n==="")}function tc(e,t,n){const i=typeof t=="string"?Cs(t):t;if(!Array.isArray(i))throw new Error("Path must be an array or a string");let r=e;for(let s=0;s<i.length;s++){const o=i[s];if(ei(o)){if(!Array.isArray(r))return n;r=r[o]}if(Zt(o)){if(!Array.isArray(r))return n;r=r.find(a=>a._key===o._key)}if(typeof o=="string"&&(r=typeof r=="object"&&r!==null?r[o]:void 0),typeof r>"u")return n}return r}function nc(e){if(!Array.isArray(e))throw new Error("Path is not an array");return e.reduce((t,n,i)=>{const r=typeof n;if(r==="number")return`${t}[${n}]`;if(r==="string")return`${t}${i===0?"":"."}${n}`;if(Zt(n)&&n._key)return`${t}[_key=="${n._key}"]`;if(Array.isArray(n)){const[s,o]=n;return`${t}[${s}:${o}]`}throw new Error(`Unsupported path segment \`${JSON.stringify(n)}\``)},"")}function Cs(e){if(typeof e!="string")throw new Error("Path is not a string");const t=e.match(Qa);if(!t)throw new Error("Invalid path string");return t.map(ic)}function ic(e){return ei(e)?rc(e):Zt(e)?sc(e):Ts(e)?oc(e):e}function rc(e){return Number(e.replace(/[^\d]/g,""))}function sc(e){return{_key:e.match(Qn)[1]}}function oc(e){const[t,n]=e.split(":").map(i=>i===""?i:Number(i));return[t,n]}var As=Object.freeze({__proto__:null,fromString:Cs,get:tc,isIndexSegment:ei,isIndexTuple:Ts,isKeySegment:Zt,reKeySegment:Qn,toString:nc});const Wi="drafts.";function gp(e){return e.startsWith(Wi)?e.slice(Wi.length):e}const Hi={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},Ki={"\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function ac(e){return`$${e.map(t=>typeof t=="string"?`['${t.replace(/[\f\n\r\t'\\]/g,n=>Hi[n])}']`:typeof t=="number"?`[${t}]`:t._key!==""?`[?(@._key=='${t._key.replace(/['\\]/g,n=>Hi[n])}')]`:`[${t._index}]`).join("")}`}function yp(e){const t=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;let i;for(;(i=n.exec(e))!==null;){if(i[1]!==void 0){const r=i[1].replace(/\\(\\|f|n|r|t|')/g,s=>Ki[s]);t.push(r);continue}if(i[2]!==void 0){t.push(parseInt(i[2],10));continue}if(i[3]!==void 0){const r=i[3].replace(/\\(\\')/g,s=>Ki[s]);t.push({_key:r,_index:-1});continue}}return t}function cc(e){return e.map(t=>{if(typeof t=="string"||typeof t=="number")return t;if(t._index!==-1)return t._index;throw new Error(`invalid segment:${JSON.stringify(t)}`)})}function vp(e,t){if(!(t!=null&&t.mappings))return;const n=ac(cc(e));if(t.mappings[n]!==void 0)return{mapping:t.mappings[n],matchedPath:n,pathSuffix:""};const i=Object.entries(t.mappings).filter(([a])=>n.startsWith(a)).sort(([a],[c])=>c.length-a.length);if(i.length==0)return;const[r,s]=i[0],o=n.substring(r.length);return{mapping:s,matchedPath:r,pathSuffix:o}}function lc(e){return e!==null&&Array.isArray(e)}function Gi(e){return typeof e=="object"&&e!==null}function hn(e,t,n=[]){return lc(e)?e.map((i,r)=>{if(Gi(i)){const s=i._key;if(typeof s=="string")return hn(i,t,n.concat({_key:s,_index:r}))}return hn(i,t,n.concat(r))}):Gi(e)?Object.fromEntries(Object.entries(e).map(([i,r])=>[i,hn(r,t,n.concat(i))])):t(e,n)}const js="sanity.previewUrlSecret",uc="sanity-preview-url-secret",dc="2023-11-09",Jt="sanity-preview-secret",ti="sanity-preview-pathname",fc=3600,hc=`*[_type == "${js}" && dateTime(_updatedAt) <= dateTime(now()) - 3600]`,pc="sanity.preview-url-secret";function mc(e){const t=new URL(e);return t.searchParams.delete(ti),t.searchParams.delete(Jt),t}function gc(e){return e.searchParams.has(Jt)}function yc(e,t,n){const i=new URL(e);return i.searchParams.set(Jt,t),i.searchParams.set(ti,n),i}const $t=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Qt=p.createContext({}),en=p.createContext(null),tn=typeof document<"u",ni=tn?p.useLayoutEffect:p.useEffect,Es=p.createContext({strict:!1}),ii=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vc="framerAppearId",Vs="data-"+ii(vc),Rs={skipAnimations:!1,useManualTiming:!1};class qi{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function xc(e){let t=new qi,n=new qi,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(c,l=!1,d=!1)=>{const u=d&&r,f=u?t:n;return l&&o.add(c),f.add(c)&&u&&r&&(i=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(r){s=!0;return}if(r=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let l=0;l<i;l++){const d=t.order[l];o.has(d)&&(a.schedule(d),e()),d(c)}r=!1,s&&(s=!1,a.process(c))}};return a}const St=["prepare","read","update","preRender","render","postRender"],bc=40;function Ds(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=St.reduce((u,f)=>(u[f]=xc(()=>n=!0),u),{}),o=u=>{s[u].process(r)},a=()=>{const u=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(u-r.timestamp,bc),1),r.timestamp=u,r.isProcessing=!0,St.forEach(o),r.isProcessing=!1,n&&t&&(i=!1,e(a))},c=()=>{n=!0,i=!0,r.isProcessing||e(a)};return{schedule:St.reduce((u,f)=>{const h=s[f];return u[f]=(g,v=!1,y=!1)=>(n||c(),h.schedule(g,v,y)),u},{}),cancel:u=>St.forEach(f=>s[f].cancel(u)),state:r,steps:s}}const{schedule:ri,cancel:xp}=Ds(queueMicrotask,!1);function wc(e,t,n,i){const{visualElement:r}=p.useContext(Qt),s=p.useContext(Es),o=p.useContext(en),a=p.useContext($t).reducedMotion,c=p.useRef();i=i||s.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const l=c.current;p.useInsertionEffect(()=>{l&&l.update(n,o)});const d=p.useRef(!!(n[Vs]&&!window.HandoffComplete));return ni(()=>{l&&(ri.postRender(l.render),d.current&&l.animationState&&l.animationState.animateChanges())}),p.useEffect(()=>{l&&(l.updateFeatures(),!d.current&&l.animationState&&l.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),l}function Xe(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Pc(e,t,n){return p.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Xe(n)&&(n.current=i))},[t])}function ht(e){return typeof e=="string"||Array.isArray(e)}function nn(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const si=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],oi=["initial",...si];function rn(e){return nn(e.animate)||oi.some(t=>ht(e[t]))}function Ms(e){return!!(rn(e)||e.variants)}function Sc(e,t){if(rn(e)){const{initial:n,animate:i}=e;return{initial:n===!1||ht(n)?n:void 0,animate:ht(i)?i:void 0}}return e.inherit!==!1?t:{}}function Tc(e){const{initial:t,animate:n}=Sc(e,p.useContext(Qt));return p.useMemo(()=>({initial:t,animate:n}),[Xi(t),Xi(n)])}function Xi(e){return Array.isArray(e)?e.join(" "):e}const Yi={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pt={};for(const e in Yi)pt[e]={isEnabled:t=>Yi[e].some(n=>!!t[n])};function Cc(e){for(const t in e)pt[t]={...pt[t],...e[t]}}const ai=p.createContext({}),ks=p.createContext({}),Ac=Symbol.for("motionComponentSymbol");function jc({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:r}){e&&Cc(e);function s(a,c){let l;const d={...p.useContext($t),...a,layoutId:Ec(a)},{isStatic:u}=d,f=Tc(a),h=i(a,u);if(!u&&tn){f.visualElement=wc(r,h,d,t);const g=p.useContext(ks),v=p.useContext(Es).strict;f.visualElement&&(l=f.visualElement.loadFeatures(d,v,e,g))}return p.createElement(Qt.Provider,{value:f},l&&f.visualElement?p.createElement(l,{visualElement:f.visualElement,...d}):null,n(r,a,Pc(h,f.visualElement,c),h,u,f.visualElement))}const o=p.forwardRef(s);return o[Ac]=r,o}function Ec({layoutId:e}){const t=p.useContext(ai).id;return t&&e!==void 0?t+"-"+e:e}function Vc(e){function t(i,r={}){return jc(e(i,r))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const Rc=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ci(e){return typeof e!="string"||e.includes("-")?!1:!!(Rc.indexOf(e)>-1||/[A-Z]/.test(e))}const Ut={};function Dc(e){Object.assign(Ut,e)}const gt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ge=new Set(gt);function Ls(e,{layout:t,layoutId:n}){return Ge.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Ut[e]||e==="opacity")}const ce=e=>!!(e&&e.getVelocity),Mc={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kc=gt.length;function Lc(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,r){let s="";for(let o=0;o<kc;o++){const a=gt[o];if(e[a]!==void 0){const c=Mc[a]||a;s+=`${c}(${e[a]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,i?"":s):n&&i&&(s="none"),s}const Is=e=>t=>typeof t=="string"&&t.startsWith(e),Os=Is("--"),Ic=Is("var(--"),_t=e=>Ic(e)?Oc.test(e.split("/*")[0].trim()):!1,Oc=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)$/i,Fc=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Oe=(e,t,n)=>n>t?t:n<e?e:n,nt={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},lt={...nt,transform:e=>Oe(0,1,e)},Tt={...nt,default:1},ut=e=>Math.round(e*1e5)/1e5,li=/(-)?([\d]*\.?[\d])+/g,Bc=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,$c=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yt(e){return typeof e=="string"}const vt=e=>({test:t=>yt(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Me=vt("deg"),we=vt("%"),E=vt("px"),Uc=vt("vh"),_c=vt("vw"),Zi={...we,parse:e=>we.parse(e)/100,transform:e=>we.transform(e*100)},Ji={...nt,transform:Math.round},Fs={borderWidth:E,borderTopWidth:E,borderRightWidth:E,borderBottomWidth:E,borderLeftWidth:E,borderRadius:E,radius:E,borderTopLeftRadius:E,borderTopRightRadius:E,borderBottomRightRadius:E,borderBottomLeftRadius:E,width:E,maxWidth:E,height:E,maxHeight:E,size:E,top:E,right:E,bottom:E,left:E,padding:E,paddingTop:E,paddingRight:E,paddingBottom:E,paddingLeft:E,margin:E,marginTop:E,marginRight:E,marginBottom:E,marginLeft:E,rotate:Me,rotateX:Me,rotateY:Me,rotateZ:Me,scale:Tt,scaleX:Tt,scaleY:Tt,scaleZ:Tt,skew:Me,skewX:Me,skewY:Me,distance:E,translateX:E,translateY:E,translateZ:E,x:E,y:E,z:E,perspective:E,transformPerspective:E,opacity:lt,originX:Zi,originY:Zi,originZ:E,zIndex:Ji,fillOpacity:lt,strokeOpacity:lt,numOctaves:Ji};function ui(e,t,n,i){const{style:r,vars:s,transform:o,transformOrigin:a}=e;let c=!1,l=!1,d=!0;for(const u in t){const f=t[u];if(Os(u)){s[u]=f;continue}const h=Fs[u],g=Fc(f,h);if(Ge.has(u)){if(c=!0,o[u]=g,!d)continue;f!==(h.default||0)&&(d=!1)}else u.startsWith("origin")?(l=!0,a[u]=g):r[u]=g}if(t.transform||(c||i?r.transform=Lc(e.transform,n,d,i):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:f="50%",originZ:h=0}=a;r.transformOrigin=`${u} ${f} ${h}`}}const di=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Bs(e,t,n){for(const i in t)!ce(t[i])&&!Ls(i,n)&&(e[i]=t[i])}function zc({transformTemplate:e},t,n){return p.useMemo(()=>{const i=di();return ui(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function Nc(e,t,n){const i=e.style||{},r={};return Bs(r,i,e),Object.assign(r,zc(e,t,n)),r}function Wc(e,t,n){const i={},r=Nc(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}const Hc=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zt(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Hc.has(e)}let $s=e=>!zt(e);function Us(e){e&&($s=t=>t.startsWith("on")?!zt(t):e(t))}try{Us(require("@emotion/is-prop-valid").default)}catch{}function Kc(e,t,n){const i={};for(const r in e)r==="values"&&typeof e.values=="object"||($s(r)||n===!0&&zt(r)||!t&&!zt(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}function Qi(e,t,n){return typeof e=="string"?e:E.transform(t+n*e)}function Gc(e,t,n){const i=Qi(t,e.x,e.width),r=Qi(n,e.y,e.height);return`${i} ${r}`}const qc={offset:"stroke-dashoffset",array:"stroke-dasharray"},Xc={offset:"strokeDashoffset",array:"strokeDasharray"};function Yc(e,t,n=1,i=0,r=!0){e.pathLength=1;const s=r?qc:Xc;e[s.offset]=E.transform(-i);const o=E.transform(t),a=E.transform(n);e[s.array]=`${o} ${a}`}function fi(e,{attrX:t,attrY:n,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...l},d,u,f){if(ui(e,l,d,f),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g,dimensions:v}=e;h.transform&&(v&&(g.transform=h.transform),delete h.transform),v&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=Gc(v,r!==void 0?r:.5,s!==void 0?s:.5)),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),o!==void 0&&Yc(h,o,a,c,!1)}const _s=()=>({...di(),attrs:{}}),hi=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zc(e,t,n,i){const r=p.useMemo(()=>{const s=_s();return fi(s,t,{enableHardwareAcceleration:!1},hi(i),e.transformTemplate),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};Bs(s,e.style,e),r.style={...s,...r.style}}return r}function Jc(e=!1){return(n,i,r,{latestValues:s},o)=>{const c=(ci(n)?Zc:Wc)(i,s,o,n),l=Kc(i,typeof n=="string",e),d=n!==p.Fragment?{...l,...c,ref:r}:{},{children:u}=i,f=p.useMemo(()=>ce(u)?u.get():u,[u]);return p.createElement(n,{...d,children:f})}}function zs(e,{style:t,vars:n},i,r){Object.assign(e.style,t,r&&r.getProjectionStyles(i));for(const s in n)e.style.setProperty(s,n[s])}const Ns=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ws(e,t,n,i){zs(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(Ns.has(r)?r:ii(r),t.attrs[r])}function pi(e,t){const{style:n}=e,i={};for(const r in n)(ce(n[r])||t.style&&ce(t.style[r])||Ls(r,e))&&(i[r]=n[r]);return i}function Hs(e,t){const n=pi(e,t);for(const i in e)if(ce(e[i])||ce(t[i])){const r=gt.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[r]=e[i]}return n}function mi(e,t,n,i={},r={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,r)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,r)),t}function gi(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Nt=e=>Array.isArray(e),Qc=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),el=e=>Nt(e)?e[e.length-1]||0:e;function Vt(e){const t=ce(e)?e.get():e;return Qc(t)?t.toValue():t}function tl({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,r,s){const o={latestValues:nl(i,r,s,e),renderState:t()};return n&&(o.mount=a=>n(i,a,o)),o}const Ks=e=>(t,n)=>{const i=p.useContext(Qt),r=p.useContext(en),s=()=>tl(e,t,i,r);return n?s():gi(s)};function nl(e,t,n,i){const r={},s=i(e,{});for(const f in s)r[f]=Vt(s[f]);let{initial:o,animate:a}=e;const c=rn(e),l=Ms(e);t&&l&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const u=d?a:o;return u&&typeof u!="boolean"&&!nn(u)&&(Array.isArray(u)?u:[u]).forEach(h=>{const g=mi(e,h);if(!g)return;const{transitionEnd:v,transition:y,...P}=g;for(const x in P){let b=P[x];if(Array.isArray(b)){const w=d?b.length-1:0;b=b[w]}b!==null&&(r[x]=b)}for(const x in v)r[x]=v[x]}),r}const H=e=>e,{schedule:B,cancel:je,state:te,steps:pn}=Ds(typeof requestAnimationFrame<"u"?requestAnimationFrame:H,!0),il={useVisualState:Ks({scrapeMotionValuesFromProps:Hs,createRenderState:_s,onMount:(e,t,{renderState:n,latestValues:i})=>{B.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),B.render(()=>{fi(n,i,{enableHardwareAcceleration:!1},hi(t.tagName),e.transformTemplate),Ws(t,n)})}})},rl={useVisualState:Ks({scrapeMotionValuesFromProps:pi,createRenderState:di})};function sl(e,{forwardMotionProps:t=!1},n,i){return{...ci(e)?il:rl,preloadedFeatures:n,useRender:Jc(t),createVisualElement:i,Component:e}}function Se(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const Gs=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function sn(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ol=e=>t=>Gs(t)&&e(t,sn(t));function Te(e,t,n,i){return Se(e,t,ol(n),i)}const al=(e,t)=>n=>t(e(n)),Ce=(...e)=>e.reduce(al);function qs(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const er=qs("dragHorizontal"),tr=qs("dragVertical");function Xs(e){let t=!1;if(e==="y")t=tr();else if(e==="x")t=er();else{const n=er(),i=tr();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function Ys(){const e=Xs(!0);return e?(e(),!1):!0}class Ue{constructor(t){this.isMounted=!1,this.node=t}update(){}}function nr(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),r=(s,o)=>{if(s.pointerType==="touch"||Ys())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[i]&&B.update(()=>a[i](s,o))};return Te(e.current,n,r,{passive:!e.getProps()[i]})}class cl extends Ue{mount(){this.unmount=Ce(nr(this.node,!0),nr(this.node,!1))}unmount(){}}class ll extends Ue{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ce(Se(this.node.current,"focus",()=>this.onFocus()),Se(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Zs=(e,t)=>t?e===t?!0:Zs(e,t.parentElement):!1;function mn(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,sn(n))}class ul extends Ue{constructor(){super(...arguments),this.removeStartListeners=H,this.removeEndListeners=H,this.removeAccessibleListeners=H,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=Te(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:l,onTapCancel:d,globalTapTarget:u}=this.node.getProps();B.update(()=>{!u&&!Zs(this.node.current,a.target)?d&&d(a,c):l&&l(a,c)})},{passive:!(i.onTap||i.onPointerUp)}),o=Te(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Ce(s,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||mn("up",(c,l)=>{const{onTap:d}=this.node.getProps();d&&B.update(()=>d(c,l))})};this.removeEndListeners(),this.removeEndListeners=Se(this.node.current,"keyup",o),mn("down",(a,c)=>{this.startPress(a,c)})},n=Se(this.node.current,"keydown",t),i=()=>{this.isPressing&&mn("cancel",(s,o)=>this.cancelPress(s,o))},r=Se(this.node.current,"blur",i);this.removeAccessibleListeners=Ce(n,r)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&B.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ys()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&B.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Te(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Se(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ce(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Dn=new WeakMap,gn=new WeakMap,dl=e=>{const t=Dn.get(e.target);t&&t(e)},fl=e=>{e.forEach(dl)};function hl({root:e,...t}){const n=e||document;gn.has(n)||gn.set(n,{});const i=gn.get(n),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(fl,{root:e,...t})),i[r]}function pl(e,t,n){const i=hl(t);return Dn.set(e,n),i.observe(e),()=>{Dn.delete(e),i.unobserve(e)}}const ml={some:0,all:1};class gl extends Ue{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ml[r]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,s&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:d,onViewportLeave:u}=this.node.getProps(),f=l?d:u;f&&f(c)};return pl(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(yl(t,n))&&this.startObserver()}unmount(){}}function yl({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const vl={inView:{Feature:gl},tap:{Feature:ul},focus:{Feature:ll},hover:{Feature:cl}};function Js(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function xl(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function bl(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function on(e,t,n){const i=e.getProps();return mi(i,t,n!==void 0?n:i.custom,xl(e),bl(e))}let wl=H,yi=H;const Ie=e=>e*1e3,Ae=e=>e/1e3,Pl={current:!1},Qs=e=>Array.isArray(e)&&typeof e[0]=="number";function eo(e){return!!(!e||typeof e=="string"&&to[e]||Qs(e)||Array.isArray(e)&&e.every(eo))}const ct=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,to={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ct([0,.65,.55,1]),circOut:ct([.55,0,1,.45]),backIn:ct([.31,.01,.66,-.59]),backOut:ct([.33,1.53,.69,.99])};function no(e){if(e)return Qs(e)?ct(e):Array.isArray(e)?e.map(no):to[e]}function Sl(e,t,n,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const l={[t]:n};c&&(l.offset=c);const d=no(a);return Array.isArray(d)&&(l.easing=d),e.animate(l,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function Tl(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const io=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Cl=1e-7,Al=12;function jl(e,t,n,i,r){let s,o,a=0;do o=t+(n-t)/2,s=io(o,i,r)-e,s>0?n=o:t=o;while(Math.abs(s)>Cl&&++a<Al);return o}function xt(e,t,n,i){if(e===t&&n===i)return H;const r=s=>jl(s,0,1,e,n);return s=>s===0||s===1?s:io(r(s),t,i)}const El=xt(.42,0,1,1),Vl=xt(0,0,.58,1),ro=xt(.42,0,.58,1),Rl=e=>Array.isArray(e)&&typeof e[0]!="number",so=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,oo=e=>t=>1-e(1-t),vi=e=>1-Math.sin(Math.acos(e)),ao=oo(vi),Dl=so(vi),co=xt(.33,1.53,.69,.99),xi=oo(co),Ml=so(xi),kl=e=>(e*=2)<1?.5*xi(e):.5*(2-Math.pow(2,-10*(e-1))),Ll={linear:H,easeIn:El,easeInOut:ro,easeOut:Vl,circIn:vi,circInOut:Dl,circOut:ao,backIn:xi,backInOut:Ml,backOut:co,anticipate:kl},ir=e=>{if(Array.isArray(e)){yi(e.length===4);const[t,n,i,r]=e;return xt(t,n,i,r)}else if(typeof e=="string")return Ll[e];return e},mt=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},_=(e,t,n)=>e+(t-e)*n;function yn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Il({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let r=0,s=0,o=0;if(!t)r=s=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;r=yn(c,a,e+1/3),s=yn(c,a,e),o=yn(c,a,e-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const bi=(e,t)=>n=>!!(yt(n)&&$c.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),lo=(e,t,n)=>i=>{if(!yt(i))return i;const[r,s,o,a]=i.match(li);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Ol=e=>Oe(0,255,e),vn={...nt,transform:e=>Math.round(Ol(e))},He={test:bi("rgb","red"),parse:lo("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+vn.transform(e)+", "+vn.transform(t)+", "+vn.transform(n)+", "+ut(lt.transform(i))+")"};function Fl(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Mn={test:bi("#"),parse:Fl,transform:He.transform},Ye={test:bi("hsl","hue"),parse:lo("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+we.transform(ut(t))+", "+we.transform(ut(n))+", "+ut(lt.transform(i))+")"},xn=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},Bl=[Mn,He,Ye],$l=e=>Bl.find(t=>t.test(e));function rr(e){const t=$l(e);let n=t.parse(e);return t===Ye&&(n=Il(n)),n}const sr=(e,t)=>{const n=rr(e),i=rr(t),r={...n};return s=>(r.red=xn(n.red,i.red,s),r.green=xn(n.green,i.green,s),r.blue=xn(n.blue,i.blue,s),r.alpha=_(n.alpha,i.alpha,s),He.transform(r))},ie={test:e=>He.test(e)||Mn.test(e)||Ye.test(e),parse:e=>He.test(e)?He.parse(e):Ye.test(e)?Ye.parse(e):Mn.parse(e),transform:e=>yt(e)?e:e.hasOwnProperty("red")?He.transform(e):Ye.transform(e)};function Ul(e){var t,n;return isNaN(e)&&yt(e)&&(((t=e.match(li))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Bc))===null||n===void 0?void 0:n.length)||0)>0}const uo="number",fo="color",_l="var",zl="var(",or="${}",ar=/(var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\))|(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))|((-)?([\d]*\.?[\d])+)/gi;function Wt(e){const t=e.toString(),n=t.match(ar)||[],i=[],r={color:[],number:[],var:[]},s=[];for(let c=0;c<n.length;c++){const l=n[c];ie.test(l)?(r.color.push(c),s.push(fo),i.push(ie.parse(l))):l.startsWith(zl)?(r.var.push(c),s.push(_l),i.push(l)):(r.number.push(c),s.push(uo),i.push(parseFloat(l)))}const a=t.replace(ar,or).split(or);return{values:i,split:a,indexes:r,types:s}}function ho(e){return Wt(e).values}function po(e){const{split:t,types:n}=Wt(e),i=t.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=t[o],r[o]!==void 0){const a=n[o];a===uo?s+=ut(r[o]):a===fo?s+=ie.transform(r[o]):s+=r[o]}return s}}const Nl=e=>typeof e=="number"?0:e;function Wl(e){const t=ho(e);return po(e)(t.map(Nl))}const Fe={test:Ul,parse:ho,createTransformer:po,getAnimatableNone:Wl};function kn(e,t){return n=>n>0?t:e}function Hl(e,t){return n=>_(e,t,n)}function wi(e){return typeof e=="number"?Hl:typeof e=="string"?_t(e)?kn:ie.test(e)?sr:ql:Array.isArray(e)?mo:typeof e=="object"?ie.test(e)?sr:Kl:kn}function mo(e,t){const n=[...e],i=n.length,r=e.map((s,o)=>wi(s)(s,t[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}}function Kl(e,t){const n={...e,...t},i={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(i[r]=wi(e[r])(e[r],t[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function Gl(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],a=e.indexes[o][r[o]],c=(n=e.values[a])!==null&&n!==void 0?n:0;i[s]=c,r[o]++}return i}const ql=(e,t)=>{const n=Fe.createTransformer(t),i=Wt(e),r=Wt(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Ce(mo(Gl(i,r),r.values),n):kn(e,t)};function go(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?_(e,t,n):wi(e)(e,t)}function Xl(e,t,n){const i=[],r=n||go,s=e.length-1;for(let o=0;o<s;o++){let a=r(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||H:t;a=Ce(c,a)}i.push(a)}return i}function Yl(e,t,{clamp:n=!0,ease:i,mixer:r}={}){const s=e.length;if(yi(s===t.length),s===1)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Xl(t,i,r),a=o.length,c=l=>{let d=0;if(a>1)for(;d<e.length-2&&!(l<e[d+1]);d++);const u=mt(e[d],e[d+1],l);return o[d](u)};return n?l=>c(Oe(e[0],e[s-1],l)):c}function Zl(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=mt(0,t,i);e.push(_(n,1,r))}}function Jl(e){const t=[0];return Zl(t,e.length-1),t}function Ql(e,t){return e.map(n=>n*t)}function eu(e,t){return e.map(()=>t||ro).splice(0,e.length-1)}function Ht({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const r=Rl(i)?i.map(ir):ir(i),s={done:!1,value:t[0]},o=Ql(n&&n.length===t.length?n:Jl(t),e),a=Yl(o,t,{ease:Array.isArray(r)?r:eu(t,r)});return{calculatedDuration:e,next:c=>(s.value=a(c),s.done=c>=e,s)}}function yo(e,t){return t?e*(1e3/t):0}const tu=5;function vo(e,t,n){const i=Math.max(t-tu,0);return yo(n-e(i),t-i)}const bn=.001,nu=.01,cr=10,iu=.05,ru=1;function su({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let r,s;wl(e<=Ie(cr));let o=1-t;o=Oe(iu,ru,o),e=Oe(nu,cr,Ae(e)),o<1?(r=l=>{const d=l*o,u=d*e,f=d-n,h=Ln(l,o),g=Math.exp(-u);return bn-f/h*g},s=l=>{const u=l*o*e,f=u*n+n,h=Math.pow(o,2)*Math.pow(l,2)*e,g=Math.exp(-u),v=Ln(Math.pow(l,2),o);return(-r(l)+bn>0?-1:1)*((f-h)*g)/v}):(r=l=>{const d=Math.exp(-l*e),u=(l-n)*e+1;return-bn+d*u},s=l=>{const d=Math.exp(-l*e),u=(n-l)*(e*e);return d*u});const a=5/e,c=au(r,s,a);if(e=Ie(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const l=Math.pow(c,2)*i;return{stiffness:l,damping:o*2*Math.sqrt(i*l),duration:e}}}const ou=12;function au(e,t,n){let i=n;for(let r=1;r<ou;r++)i=i-e(i)/t(i);return i}function Ln(e,t){return e*Math.sqrt(1-t*t)}const cu=["duration","bounce"],lu=["stiffness","damping","mass"];function lr(e,t){return t.some(n=>e[n]!==void 0)}function uu(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!lr(e,lu)&&lr(e,cu)){const n=su(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function xo({keyframes:e,restDelta:t,restSpeed:n,...i}){const r=e[0],s=e[e.length-1],o={done:!1,value:r},{stiffness:a,damping:c,mass:l,duration:d,velocity:u,isResolvedFromDuration:f}=uu({...i,velocity:-Ae(i.velocity||0)}),h=u||0,g=c/(2*Math.sqrt(a*l)),v=s-r,y=Ae(Math.sqrt(a/l)),P=Math.abs(v)<5;n||(n=P?.01:2),t||(t=P?.005:.5);let x;if(g<1){const b=Ln(y,g);x=w=>{const T=Math.exp(-g*y*w);return s-T*((h+g*y*v)/b*Math.sin(b*w)+v*Math.cos(b*w))}}else if(g===1)x=b=>s-Math.exp(-y*b)*(v+(h+y*v)*b);else{const b=y*Math.sqrt(g*g-1);x=w=>{const T=Math.exp(-g*y*w),S=Math.min(b*w,300);return s-T*((h+g*y*v)*Math.sinh(S)+b*v*Math.cosh(S))/b}}return{calculatedDuration:f&&d||null,next:b=>{const w=x(b);if(f)o.done=b>=d;else{let T=h;b!==0&&(g<1?T=vo(x,b,w):T=0);const S=Math.abs(T)<=n,A=Math.abs(s-w)<=t;o.done=S&&A}return o.value=o.done?s:w,o}}}function ur({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:d}){const u=e[0],f={done:!1,value:u},h=C=>a!==void 0&&C<a||c!==void 0&&C>c,g=C=>a===void 0?c:c===void 0||Math.abs(a-C)<Math.abs(c-C)?a:c;let v=n*t;const y=u+v,P=o===void 0?y:o(y);P!==y&&(v=P-u);const x=C=>-v*Math.exp(-C/i),b=C=>P+x(C),w=C=>{const j=x(C),R=b(C);f.done=Math.abs(j)<=l,f.value=f.done?P:R};let T,S;const A=C=>{h(f.value)&&(T=C,S=xo({keyframes:[f.value,g(f.value)],velocity:vo(b,C,f.value),damping:r,stiffness:s,restDelta:l,restSpeed:d}))};return A(0),{calculatedDuration:null,next:C=>{let j=!1;return!S&&T===void 0&&(j=!0,w(C),A(C)),T!==void 0&&C>T?S.next(C-T):(!j&&w(C),f)}}}let Rt;function du(){Rt=void 0}const Ke={now:()=>(Rt===void 0&&Ke.set(te.isProcessing||Rs.useManualTiming?te.timestamp:performance.now()),Rt),set:e=>{Rt=e,queueMicrotask(du)}},fu=e=>{const t=({timestamp:n})=>e(n);return{start:()=>B.update(t,!0),stop:()=>je(t),now:()=>te.isProcessing?te.timestamp:Ke.now()}},dr=2e4;function fr(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<dr;)t+=n,i=e.next(t);return t>=dr?1/0:t}const hu={decay:ur,inertia:ur,tween:Ht,keyframes:Ht,spring:xo},pu=e=>e/100;function Kt({autoplay:e=!0,delay:t=0,driver:n=fu,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:l,onComplete:d,onUpdate:u,...f}){let h=1,g=!1,v,y;const P=()=>{y=new Promise(D=>{v=D})};P();let x;const b=hu[r]||Ht;let w;b!==Ht&&typeof i[0]!="number"&&(w=Ce(pu,go(i[0],i[1])),i=[0,100]);const T=b({...f,keyframes:i});let S;a==="mirror"&&(S=b({...f,keyframes:[...i].reverse(),velocity:-(f.velocity||0)}));let A="idle",C=null,j=null,R=null;T.calculatedDuration===null&&s&&(T.calculatedDuration=fr(T));const{calculatedDuration:O}=T;let $=1/0,G=1/0;O!==null&&($=O+o,G=$*(s+1)-o);let F=0;const z=D=>{if(j===null)return;h>0&&(j=Math.min(j,D)),h<0&&(j=Math.min(D-G/h,j)),C!==null?F=C:F=Math.round(D-j)*h;const Z=F-t*(h>=0?1:-1),Ee=h>=0?Z<0:Z>G;F=Math.max(Z,0),A==="finished"&&C===null&&(F=G);let U=F,de=T;if(s){const ae=Math.min(F,G)/$;let se=Math.floor(ae),J=ae%1;!J&&ae>=1&&(J=1),J===1&&se--,se=Math.min(se,s+1),!!(se%2)&&(a==="reverse"?(J=1-J,o&&(J-=o/$)):a==="mirror"&&(de=S)),U=Oe(0,1,J)*$}const re=Ee?{done:!1,value:i[0]}:de.next(U);w&&(re.value=w(re.value));let{done:Ve}=re;!Ee&&O!==null&&(Ve=h>=0?F>=G:F<=0);const ne=C===null&&(A==="finished"||A==="running"&&Ve);return u&&u(re.value),ne&&N(),re},I=()=>{x&&x.stop(),x=void 0},Y=()=>{A="idle",I(),v(),P(),j=R=null},N=()=>{A="finished",d&&d(),I(),v()},le=()=>{if(g)return;x||(x=n(z));const D=x.now();c&&c(),C!==null?j=D-C:(!j||A==="finished")&&(j=D),A==="finished"&&P(),R=j,C=null,A="running",x.start()};e&&le();const ue={then(D,Z){return y.then(D,Z)},get time(){return Ae(F)},set time(D){D=Ie(D),F=D,C!==null||!x||h===0?C=D:j=x.now()-D/h},get duration(){const D=T.calculatedDuration===null?fr(T):T.calculatedDuration;return Ae(D)},get speed(){return h},set speed(D){D===h||!x||(h=D,ue.time=Ae(F))},get state(){return A},play:le,pause:()=>{A="paused",C=F},stop:()=>{g=!0,A!=="idle"&&(A="idle",l&&l(),Y())},cancel:()=>{R!==null&&z(R),Y()},complete:()=>{A="finished"},sample:D=>(j=0,z(D))};return ue}function mu(e){let t;return()=>(t===void 0&&(t=e()),t)}const gu=mu(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yu=new Set(["opacity","clipPath","filter","transform"]),Ct=10,vu=2e4,xu=(e,t)=>t.type==="spring"||e==="backgroundColor"||!eo(t.ease);function bu(e,t,{onUpdate:n,onComplete:i,...r}){if(!(gu()&&yu.has(t)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,c,l=!1;const d=()=>{c=new Promise(b=>{a=b})};d();let{keyframes:u,duration:f=300,ease:h,times:g}=r;if(xu(t,r)){const b=Kt({...r,repeat:0,delay:0});let w={done:!1,value:u[0]};const T=[];let S=0;for(;!w.done&&S<vu;)w=b.sample(S),T.push(w.value),S+=Ct;g=void 0,u=T,f=S-Ct,h="linear"}const v=Sl(e.owner.current,t,u,{...r,duration:f,ease:h,times:g}),y=()=>{l=!1,v.cancel()},P=()=>{l=!0,B.update(y),a(),d()};return v.onfinish=()=>{l||(e.set(Tl(u,r)),i&&i(),P())},{then(b,w){return c.then(b,w)},attachTimeline(b){return v.timeline=b,v.onfinish=null,H},get time(){return Ae(v.currentTime||0)},set time(b){v.currentTime=Ie(b)},get speed(){return v.playbackRate},set speed(b){v.playbackRate=b},get duration(){return Ae(f)},play:()=>{o||(v.play(),je(y))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:b}=v;if(b){const w=Kt({...r,autoplay:!1});e.setWithVelocity(w.sample(b-Ct).value,w.sample(b).value,Ct)}P()},complete:()=>{l||v.finish()},cancel:P}}function wu({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const r=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:H,pause:H,stop:H,then:s=>(s(),Promise.resolve()),cancel:H,complete:H});return t?Kt({keyframes:[0,1],duration:0,delay:t,onComplete:r}):r()}const Pu={type:"spring",stiffness:500,damping:25,restSpeed:10},Su=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Tu={type:"keyframes",duration:.8},Cu={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Au=(e,{keyframes:t})=>t.length>2?Tu:Ge.has(e)?e.startsWith("scale")?Su(t[1]):Pu:Cu,In=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Fe.test(t)||t==="0")&&!t.startsWith("url(")),ju=new Set(["brightness","contrast","saturate","opacity"]);function Eu(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(li)||[];if(!i)return e;const r=n.replace(i,"");let s=ju.has(t)?1:0;return i!==n&&(s*=100),t+"("+s+r+")"}const Vu=/([a-z-]*)\(.*?\)/g,On={...Fe,getAnimatableNone:e=>{const t=e.match(Vu);return t?t.map(Eu).join(" "):e}},Ru={...Fs,color:ie,backgroundColor:ie,outlineColor:ie,fill:ie,stroke:ie,borderColor:ie,borderTopColor:ie,borderRightColor:ie,borderBottomColor:ie,borderLeftColor:ie,filter:On,WebkitFilter:On},Pi=e=>Ru[e];function bo(e,t){let n=Pi(e);return n!==On&&(n=Fe),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wo=e=>/^0[^.\s]+$/.test(e);function Du(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||wo(e)}function Mu(e,t,n,i){const r=In(t,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=i.from!==void 0?i.from:e.get();let a;const c=[];for(let l=0;l<s.length;l++)s[l]===null&&(s[l]=l===0?o:s[l-1]),Du(s[l])&&c.push(l),typeof s[l]=="string"&&s[l]!=="none"&&s[l]!=="0"&&(a=s[l]);if(r&&c.length&&a)for(let l=0;l<c.length;l++){const d=c[l];s[d]=bo(t,a)}return s}function ku({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:l,...d}){return!!Object.keys(d).length}function Si(e,t){return e[t]||e.default||e}const Ti=(e,t,n,i={})=>r=>{const s=Si(i,e)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-Ie(o);const c=Mu(t,e,n,s),l=c[0],d=c[c.length-1],u=In(e,l),f=In(e,d);let h={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:g=>{t.set(g),s.onUpdate&&s.onUpdate(g)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(ku(s)||(h={...h,...Au(e,h)}),h.duration&&(h.duration=Ie(h.duration)),h.repeatDelay&&(h.repeatDelay=Ie(h.repeatDelay)),!u||!f||Pl.current||s.type===!1||Rs.skipAnimations)return wu(h);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=bu(t,e,h);if(g)return g}return Kt(h)};function Gt(e){return!!(ce(e)&&e.add)}const Po=e=>/^\-?\d*\.?\d+$/.test(e);function Ci(e,t){e.indexOf(t)===-1&&e.push(t)}function Ai(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ji{constructor(){this.subscriptions=[]}add(t){return Ci(this.subscriptions,t),()=>Ai(this.subscriptions,t)}notify(t,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hr=30,Lu=e=>!isNaN(parseFloat(e));class Iu{constructor(t,n={}){this.version="11.0.8",this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ke.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.canTrackVelocity=Lu(this.current),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ke.now()}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ji);const i=this.events[t].add(n);return t==="change"?()=>{i(),B.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ke.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>hr)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,hr);return yo(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qe(e,t){return new Iu(e,t)}const So=e=>t=>t.test(e),Ou={test:e=>e==="auto",parse:e=>e},To=[nt,E,we,Me,_c,Uc,Ou],ot=e=>To.find(So(e)),Fu=[...To,ie,Fe],Bu=e=>Fu.find(So(e));function $u(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Qe(n))}function Uu(e,t){const n=on(e,t);let{transitionEnd:i={},transition:r={},...s}=n?e.makeTargetAnimatable(n,!1):{};s={...s,...i};for(const o in s){const a=el(s[o]);$u(e,o,a)}}function _u(e,t,n){var i,r;const s=Object.keys(t).filter(a=>!e.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const c=s[a],l=t[c];let d=null;Array.isArray(l)&&(d=l[0]),d===null&&(d=(r=(i=n[c])!==null&&i!==void 0?i:e.readValue(c))!==null&&r!==void 0?r:t[c]),d!=null&&(typeof d=="string"&&(Po(d)||wo(d))?d=parseFloat(d):!Bu(d)&&Fe.test(l)&&(d=bo(c,l)),e.addValue(c,Qe(d,{owner:e})),n[c]===void 0&&(n[c]=d),d!==null&&e.setBaseTarget(c,d))}}function zu(e,t){return t?(t[e]||t.default||t).from:void 0}function Nu(e,t,n){const i={};for(const r in e){const s=zu(r,t);if(s!==void 0)i[r]=s;else{const o=n.getValue(r);o&&(i[r]=o.get())}}return i}function Wu({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function Hu(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function Co(e,t,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");i&&(s=i);const l=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const u in a){const f=e.getValue(u),h=a[u];if(!f||h===void 0||d&&Wu(d,u))continue;const g={delay:n,elapsed:0,...Si(s||{},u)};if(window.HandoffAppearAnimations){const P=e.getProps()[Vs];if(P){const x=window.HandoffAppearAnimations(P,u,f,B);x!==null&&(g.elapsed=x,g.isHandoff=!0)}}let v=!g.isHandoff&&!Hu(f,h);if(g.type==="spring"&&(f.getVelocity()||g.velocity)&&(v=!1),f.animation&&(v=!1),v)continue;f.start(Ti(u,f,h,e.shouldReduceMotion&&Ge.has(u)?{type:!1}:g));const y=f.animation;Gt(c)&&(c.add(u),y.then(()=>c.remove(u))),l.push(y)}return o&&Promise.all(l).then(()=>{o&&Uu(e,o)}),l}function Fn(e,t,n={}){const i=on(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(Co(e,i,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:l=0,staggerChildren:d,staggerDirection:u}=r;return Ku(e,t,l+c,d,u,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,l]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>l())}else return Promise.all([s(),o(n.delay)])}function Ku(e,t,n=0,i=0,r=1,s){const o=[],a=(e.variantChildren.size-1)*i,c=r===1?(l=0)=>l*i:(l=0)=>a-l*i;return Array.from(e.variantChildren).sort(Gu).forEach((l,d)=>{l.notify("AnimationStart",t),o.push(Fn(l,t,{...s,delay:n+c(d)}).then(()=>l.notify("AnimationComplete",t)))}),Promise.all(o)}function Gu(e,t){return e.sortNodePosition(t)}function qu(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const r=t.map(s=>Fn(e,s,n));i=Promise.all(r)}else if(typeof t=="string")i=Fn(e,t,n);else{const r=typeof t=="function"?on(e,t,n.custom):t;i=Promise.all(Co(e,r,n))}return i.then(()=>e.notify("AnimationComplete",t))}const Xu=[...si].reverse(),Yu=si.length;function Zu(e){return t=>Promise.all(t.map(({animation:n,options:i})=>qu(e,n,i)))}function Ju(e){let t=Zu(e);const n=ed();let i=!0;const r=(c,l)=>{const d=on(e,l);if(d){const{transition:u,transitionEnd:f,...h}=d;c={...c,...h,...f}}return c};function s(c){t=c(e)}function o(c,l){const d=e.getProps(),u=e.getVariantContext(!0)||{},f=[],h=new Set;let g={},v=1/0;for(let P=0;P<Yu;P++){const x=Xu[P],b=n[x],w=d[x]!==void 0?d[x]:u[x],T=ht(w),S=x===l?b.isActive:null;S===!1&&(v=P);let A=w===u[x]&&w!==d[x]&&T;if(A&&i&&e.manuallyAnimateOnMount&&(A=!1),b.protectedKeys={...g},!b.isActive&&S===null||!w&&!b.prevProp||nn(w)||typeof w=="boolean")continue;let j=Qu(b.prevProp,w)||x===l&&b.isActive&&!A&&T||P>v&&T,R=!1;const O=Array.isArray(w)?w:[w];let $=O.reduce(r,{});S===!1&&($={});const{prevResolvedValues:G={}}=b,F={...G,...$},z=I=>{j=!0,h.has(I)&&(R=!0,h.delete(I)),b.needsAnimating[I]=!0};for(const I in F){const Y=$[I],N=G[I];if(g.hasOwnProperty(I))continue;let le=!1;Nt(Y)&&Nt(N)?le=!Js(Y,N):le=Y!==N,le?Y!==void 0?z(I):h.add(I):Y!==void 0&&h.has(I)?z(I):b.protectedKeys[I]=!0}b.prevProp=w,b.prevResolvedValues=$,b.isActive&&(g={...g,...$}),i&&e.blockInitialAnimation&&(j=!1),j&&(!A||R)&&f.push(...O.map(I=>({animation:I,options:{type:x,...c}})))}if(h.size){const P={};h.forEach(x=>{const b=e.getBaseTarget(x);b!==void 0&&(P[x]=b)}),f.push({animation:P})}let y=!!f.length;return i&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(y=!1),i=!1,y?t(f):Promise.resolve()}function a(c,l,d){var u;if(n[c].isActive===l)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(h=>{var g;return(g=h.animationState)===null||g===void 0?void 0:g.setActive(c,l)}),n[c].isActive=l;const f=o(d,c);for(const h in n)n[h].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function Qu(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Js(t,e):!1}function _e(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ed(){return{animate:_e(!0),whileInView:_e(),whileHover:_e(),whileTap:_e(),whileDrag:_e(),whileFocus:_e(),exit:_e()}}class td extends Ue{constructor(t){super(t),t.animationState||(t.animationState=Ju(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),nn(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let nd=0;class id extends Ue{constructor(){super(...arguments),this.id=nd++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const rd={animation:{Feature:td},exit:{Feature:id}},pr=(e,t)=>Math.abs(e-t);function sd(e,t){const n=pr(e.x,t.x),i=pr(e.y,t.y);return Math.sqrt(n**2+i**2)}class Ao{constructor(t,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=Pn(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=sd(u.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:g}=u,{timestamp:v}=te;this.history.push({...g,timestamp:v});const{onStart:y,onMove:P}=this.handlers;f||(y&&y(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=wn(f,this.transformPagePoint),B.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Pn(u.type==="pointercancel"?this.lastMoveEventInfo:wn(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,y),g&&g(u,y)},!Gs(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const o=sn(t),a=wn(o,this.transformPagePoint),{point:c}=a,{timestamp:l}=te;this.history=[{...c,timestamp:l}];const{onSessionStart:d}=n;d&&d(t,Pn(a,this.history)),this.removeListeners=Ce(Te(this.contextWindow,"pointermove",this.handlePointerMove),Te(this.contextWindow,"pointerup",this.handlePointerUp),Te(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),je(this.updatePoint)}}function wn(e,t){return t?{point:t(e.point)}:e}function mr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pn({point:e},t){return{point:e,delta:mr(e,jo(t)),offset:mr(e,od(t)),velocity:ad(t,.1)}}function od(e){return e[0]}function jo(e){return e[e.length-1]}function ad(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=jo(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>Ie(t)));)n--;if(!i)return{x:0,y:0};const s=Ae(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function he(e){return e.max-e.min}function Bn(e,t=0,n=.01){return Math.abs(e-t)<=n}function gr(e,t,n,i=.5){e.origin=i,e.originPoint=_(t.min,t.max,e.origin),e.scale=he(n)/he(t),(Bn(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=_(n.min,n.max,e.origin)-e.originPoint,(Bn(e.translate)||isNaN(e.translate))&&(e.translate=0)}function dt(e,t,n,i){gr(e.x,t.x,n.x,i?i.originX:void 0),gr(e.y,t.y,n.y,i?i.originY:void 0)}function yr(e,t,n){e.min=n.min+t.min,e.max=e.min+he(t)}function cd(e,t,n){yr(e.x,t.x,n.x),yr(e.y,t.y,n.y)}function vr(e,t,n){e.min=t.min-n.min,e.max=e.min+he(t)}function ft(e,t,n){vr(e.x,t.x,n.x),vr(e.y,t.y,n.y)}function ld(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?_(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?_(n,e,i.max):Math.min(e,n)),e}function xr(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ud(e,{top:t,left:n,bottom:i,right:r}){return{x:xr(e.x,n,r),y:xr(e.y,t,i)}}function br(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function dd(e,t){return{x:br(e.x,t.x),y:br(e.y,t.y)}}function fd(e,t){let n=.5;const i=he(e),r=he(t);return r>i?n=mt(t.min,t.max-i,e.min):i>r&&(n=mt(e.min,e.max-r,t.min)),Oe(0,1,n)}function hd(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const $n=.35;function pd(e=$n){return e===!1?e=0:e===!0&&(e=$n),{x:wr(e,"left","right"),y:wr(e,"top","bottom")}}function wr(e,t,n){return{min:Pr(e,t),max:Pr(e,n)}}function Pr(e,t){return typeof e=="number"?e:e[t]||0}const Sr=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ze=()=>({x:Sr(),y:Sr()}),Tr=()=>({min:0,max:0}),W=()=>({x:Tr(),y:Tr()});function ye(e){return[e("x"),e("y")]}function Eo({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function md({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function gd(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Sn(e){return e===void 0||e===1}function Un({scale:e,scaleX:t,scaleY:n}){return!Sn(e)||!Sn(t)||!Sn(n)}function ze(e){return Un(e)||Vo(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Vo(e){return Cr(e.x)||Cr(e.y)}function Cr(e){return e&&e!=="0%"}function qt(e,t,n){const i=e-n,r=t*i;return n+r}function Ar(e,t,n,i,r){return r!==void 0&&(e=qt(e,r,i)),qt(e,n,i)+t}function _n(e,t=0,n=1,i,r){e.min=Ar(e.min,t,n,i,r),e.max=Ar(e.max,t,n,i,r)}function Ro(e,{x:t,y:n}){_n(e.x,t.translate,t.scale,t.originPoint),_n(e.y,n.translate,n.scale,n.originPoint)}function yd(e,t,n,i=!1){const r=n.length;if(!r)return;t.x=t.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Je(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ro(e,o)),i&&ze(s.latestValues)&&Je(e,s.latestValues))}t.x=jr(t.x),t.y=jr(t.y)}function jr(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ke(e,t){e.min=e.min+t,e.max=e.max+t}function Er(e,t,[n,i,r]){const s=t[r]!==void 0?t[r]:.5,o=_(e.min,e.max,s);_n(e,t[n],t[i],o,t.scale)}const vd=["x","scaleX","originX"],xd=["y","scaleY","originY"];function Je(e,t){Er(e.x,t,vd),Er(e.y,t,xd)}function Do(e,t){return Eo(gd(e.getBoundingClientRect(),t))}function bd(e,t,n){const i=Do(e,n),{scroll:r}=t;return r&&(ke(i.x,r.offset.x),ke(i.y,r.offset.y)),i}const Mo=({current:e})=>e?e.ownerDocument.defaultView:null,wd=new WeakMap;class Pd{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=W(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:u}=this.getProps();u?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sn(d,"page").point)},s=(d,u)=>{const{drag:f,dragPropagation:h,onDragStart:g}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Xs(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ye(y=>{let P=this.getAxisMotionValue(y).get()||0;if(we.test(P)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[y];b&&(P=he(b)*(parseFloat(P)/100))}}this.originPoint[y]=P}),g&&B.update(()=>g(d,u),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(d,u)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:g,onDrag:v}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:y}=u;if(h&&this.currentDirection===null){this.currentDirection=Sd(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",u.point,y),this.updateAxis("y",u.point,y),this.visualElement.render(),v&&v(d,u)},a=(d,u)=>this.stop(d,u),c=()=>ye(d=>{var u;return this.getAnimationState(d)==="paused"&&((u=this.getAxisMotionValue(d).animation)===null||u===void 0?void 0:u.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new Ao(t,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:Mo(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&B.update(()=>s(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:r}=this.getProps();if(!i||!At(t,r,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(o=ld(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,s=this.constraints;n&&Xe(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=ud(r.layoutBox,n):this.constraints=!1,this.elastic=pd(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ye(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=hd(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xe(t))return!1;const i=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=bd(i,r.root,this.visualElement.getTransformPagePoint());let o=dd(r.layout.layoutBox,s);if(n){const a=n(md(o));this.hasMutatedConstraints=!!a,a&&(o=Eo(a))}return o}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=ye(d=>{if(!At(d,n,this.currentDirection))return;let u=c&&c[d]||{};o&&(u={min:0,max:0});const f=r?200:1e6,h=r?40:1e7,g={type:"inertia",velocity:i?t[d]:0,bounceStiffness:f,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...s,...u};return this.startAxisValueAnimation(d,g)});return Promise.all(l).then(a)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(Ti(t,i,0,n))}stopAnimation(){ye(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ye(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ye(n=>{const{drag:i}=this.getProps();if(!At(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(t[n]-_(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Xe(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};ye(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();r[o]=fd({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ye(o=>{if(!At(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(_(c,l,r[o]))})}addListeners(){if(!this.visualElement.current)return;wd.set(this.visualElement,this);const t=this.visualElement.current,n=Te(t,"pointerdown",c=>{const{drag:l,dragListener:d=!0}=this.getProps();l&&d&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Xe(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=Se(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(ye(d=>{const u=this.getAxisMotionValue(d);u&&(this.originPoint[d]+=c[d].translate,u.set(u.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=$n,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function At(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Sd(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Td extends Ue{constructor(t){super(t),this.removeGroupControls=H,this.removeListeners=H,this.controls=new Pd(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||H}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vr=e=>(t,n)=>{e&&B.update(()=>e(t,n))};class Cd extends Ue{constructor(){super(...arguments),this.removePointerDownListener=H}onPointerDown(t){this.session=new Ao(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mo(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Vr(t),onStart:Vr(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&B.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=Te(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Ad(){const e=p.useContext(en);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,r=p.useId();return p.useEffect(()=>i(r),[]),!t&&n?[!1,()=>n&&n(r)]:[!0]}const Dt={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rr(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const at={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(E.test(e))e=parseFloat(e);else return e;const n=Rr(e,t.target.x),i=Rr(e,t.target.y);return`${n}% ${i}%`}},jd={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,r=Fe.parse(e);if(r.length>5)return i;const s=Fe.createTransformer(e),o=typeof r[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;r[0+o]/=a,r[1+o]/=c;const l=_(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=l),typeof r[3+o]=="number"&&(r[3+o]/=l),s(r)}};class Ed extends ys.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=t;Dc(Vd),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Dt.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||B.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ri.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function ko(e){const[t,n]=Ad(),i=p.useContext(ai);return ys.createElement(Ed,{...e,layoutGroup:i,switchLayoutGroup:p.useContext(ks),isPresent:t,safeToRemove:n})}const Vd={borderRadius:{...at,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomLeftRadius:at,borderBottomRightRadius:at,boxShadow:jd},Lo=["TopLeft","TopRight","BottomLeft","BottomRight"],Rd=Lo.length,Dr=e=>typeof e=="string"?parseFloat(e):e,Mr=e=>typeof e=="number"||E.test(e);function Dd(e,t,n,i,r,s){r?(e.opacity=_(0,n.opacity!==void 0?n.opacity:1,Md(i)),e.opacityExit=_(t.opacity!==void 0?t.opacity:1,0,kd(i))):s&&(e.opacity=_(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let o=0;o<Rd;o++){const a=`border${Lo[o]}Radius`;let c=kr(t,a),l=kr(n,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||Mr(c)===Mr(l)?(e[a]=Math.max(_(Dr(c),Dr(l),i),0),(we.test(l)||we.test(c))&&(e[a]+="%")):e[a]=l}(t.rotate||n.rotate)&&(e.rotate=_(t.rotate||0,n.rotate||0,i))}function kr(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Md=Io(0,.5,ao),kd=Io(.5,.95,H);function Io(e,t,n){return i=>i<e?0:i>t?1:n(mt(e,t,i))}function Lr(e,t){e.min=t.min,e.max=t.max}function ge(e,t){Lr(e.x,t.x),Lr(e.y,t.y)}function Ir(e,t,n,i,r){return e-=t,e=qt(e,1/n,i),r!==void 0&&(e=qt(e,1/r,i)),e}function Ld(e,t=0,n=1,i=.5,r,s=e,o=e){if(we.test(t)&&(t=parseFloat(t),t=_(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=_(s.min,s.max,i);e===s&&(a-=t),e.min=Ir(e.min,t,n,a,r),e.max=Ir(e.max,t,n,a,r)}function Or(e,t,[n,i,r],s,o){Ld(e,t[n],t[i],t[r],t.scale,s,o)}const Id=["x","scaleX","originX"],Od=["y","scaleY","originY"];function Fr(e,t,n,i){Or(e.x,t,Id,n?n.x:void 0,i?i.x:void 0),Or(e.y,t,Od,n?n.y:void 0,i?i.y:void 0)}function Br(e){return e.translate===0&&e.scale===1}function Oo(e){return Br(e.x)&&Br(e.y)}function Fd(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Fo(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function $r(e){return he(e.x)/he(e.y)}class Bd{constructor(){this.members=[]}add(t){Ci(this.members,t),t.scheduleRender()}remove(t){if(Ai(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ur(e,t,n){let i="";const r=e.x.translate/t.x,s=e.y.translate/t.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:l,rotateY:d}=n;c&&(i+=`rotate(${c}deg) `),l&&(i+=`rotateX(${l}deg) `),d&&(i+=`rotateY(${d}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const $d=(e,t)=>e.depth-t.depth;class Ud{constructor(){this.children=[],this.isDirty=!1}add(t){Ci(this.children,t),this.isDirty=!0}remove(t){Ai(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($d),this.isDirty=!1,this.children.forEach(t)}}function _d(e,t){const n=Ke.now(),i=({timestamp:r})=>{const s=r-n;s>=t&&(je(i),e(s-t))};return B.read(i,!0),()=>je(i)}function zd(e){window.MotionDebug&&window.MotionDebug.record(e)}function Nd(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Wd(e,t,n){const i=ce(e)?e:Qe(e);return i.start(Ti("",i,t,n)),i.animation}const _r=["","X","Y","Z"],Hd={visibility:"hidden"},zr=1e3;let Kd=0;const Ne={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Bo({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Kd++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ne.totalNodes=Ne.resolvedTargetDeltas=Ne.recalculatedProjection=0,this.nodes.forEach(Xd),this.nodes.forEach(ef),this.nodes.forEach(tf),this.nodes.forEach(Yd),zd(Ne)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ud)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ji),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Nd(o),this.instance=o;const{layoutId:c,layout:l,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(l||c)&&(this.isLayoutDirty=!0),e){let u;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,u&&u(),u=_d(f,250),Dt.hasAnimatedSinceResize&&(Dt.hasAnimatedSinceResize=!1,this.nodes.forEach(Wr))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f,hasRelativeTargetChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||af,{onLayoutAnimationStart:y,onLayoutAnimationComplete:P}=d.getProps(),x=!this.targetLayout||!Fo(this.targetLayout,g)||h,b=!f&&h;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(u,b);const w={...Si(v,"layout"),onPlay:y,onComplete:P};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||Wr(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,je(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nf),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const u=this.path[d];u.shouldResetTransform=!0,u.updateScroll("snapshot"),u.options.layoutRoot&&u.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Nr);return}this.isUpdating||this.nodes.forEach(Jd),this.isUpdating=!1,window.HandoffCancelAllAnimations&&window.HandoffCancelAllAnimations(),this.nodes.forEach(Qd),this.nodes.forEach(Gd),this.nodes.forEach(qd),this.clearAllSnapshots();const a=Ke.now();te.delta=Oe(0,1e3/60,a-te.timestamp),te.timestamp=a,te.isProcessing=!0,pn.update.process(te),pn.preRender.process(te),pn.render.process(te),te.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ri.read(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Zd),this.sharedNodes.forEach(rf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,B.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){B.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=W(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Oo(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,d=l!==this.prevTransformTemplateValue;o&&(a||ze(this.latestValues)||d)&&(r(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),cf(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return W();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ke(a.x,c.offset.x),ke(a.y,c.offset.y)),a}removeElementScroll(o){const a=W();ge(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c],{scroll:d,options:u}=l;if(l!==this.root&&d&&u.layoutScroll){if(d.isRoot){ge(a,o);const{scroll:f}=this.root;f&&(ke(a.x,-f.offset.x),ke(a.y,-f.offset.y))}ke(a.x,d.offset.x),ke(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const c=W();ge(c,o);for(let l=0;l<this.path.length;l++){const d=this.path[l];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Je(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ze(d.latestValues)&&Je(c,d.latestValues)}return ze(this.latestValues)&&Je(c,this.latestValues),c}removeTransform(o){const a=W();ge(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!ze(l.latestValues))continue;Un(l.latestValues)&&l.updateSnapshot();const d=W(),u=l.measurePageBox();ge(d,u),Fr(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,d)}return ze(this.latestValues)&&Fr(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==te.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==c;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:u,layoutId:f}=this.options;if(!(!this.layout||!(u||f))){if(this.resolvedRelativeTargetAt=te.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=W(),this.relativeTargetOrigin=W(),ft(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),ge(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=W(),this.targetWithTransforms=W()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cd(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ge(this.target,this.layout.layoutBox),Ro(this.target,this.targetDelta)):ge(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=W(),this.relativeTargetOrigin=W(),ft(this.relativeTargetOrigin,this.target,h.target),ge(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ne.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Un(this.parent.latestValues)||Vo(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(l=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===te.timestamp&&(l=!1),l)return;const{layout:d,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||u))return;ge(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;yd(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=W());const{target:g}=a;if(!g){this.projectionTransform&&(this.projectionDelta=Ze(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ze(),this.projectionDeltaWithTransform=Ze());const v=this.projectionTransform;dt(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=Ur(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==f||this.treeScale.y!==h)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Ne.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},d={...this.latestValues},u=Ze();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=W(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,v=h!==g,y=this.getStack(),P=!y||y.members.length<=1,x=!!(v&&!P&&this.options.crossfade===!0&&!this.path.some(of));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const T=w/1e3;Hr(u.x,o.x,T),Hr(u.y,o.y,T),this.setTargetDelta(u),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ft(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sf(this.relativeTarget,this.relativeTargetOrigin,f,T),b&&Fd(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=W()),ge(b,this.relativeTarget)),v&&(this.animationValues=d,Dd(d,l,this.latestValues,T,x,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(je(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=B.update(()=>{Dt.hasAnimatedSinceResize=!0,this.currentAnimation=Wd(0,zr,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zr),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:d}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&$o(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||W();const u=he(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+u;const f=he(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ge(a,c),Je(a,d),dt(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Bd),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const l={};for(let d=0;d<_r.length;d++){const u="rotate"+_r[d];c[u]&&(l[u]=c[u],o.setStaticValue(u,0))}o.render();for(const d in l)o.setStaticValue(d,l[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Hd;const l={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=Vt(o==null?void 0:o.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none",l;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Vt(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ze(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const f=u.animationValues||u.latestValues;this.applyTransformsToTarget(),l.transform=Ur(this.projectionDeltaWithTransform,this.treeScale,f),d&&(l.transform=d(f,l.transform));const{x:h,y:g}=this.projectionDelta;l.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?l.opacity=u===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const v in Ut){if(f[v]===void 0)continue;const{correct:y,applyTo:P}=Ut[v],x=l.transform==="none"?f[v]:y(f[v],u);if(P){const b=P.length;for(let w=0;w<b;w++)l[P[w]]=x}else l[v]=x}return this.options.layoutId&&(l.pointerEvents=u===this?Vt(o==null?void 0:o.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Nr),this.root.sharedNodes.clear()}}}function Gd(e){e.updateLayout()}function qd(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=e.layout,{animationType:s}=e.options,o=n.source!==e.layout.source;s==="size"?ye(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],h=he(f);f.min=i[u].min,f.max=f.min+h}):$o(s,n.layoutBox,i)&&ye(u=>{const f=o?n.measuredBox[u]:n.layoutBox[u],h=he(i[u]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[u].max=e.relativeTarget[u].min+h)});const a=Ze();dt(a,i,n.layoutBox);const c=Ze();o?dt(c,e.applyTransform(r,!0),n.measuredBox):dt(c,i,n.layoutBox);const l=!Oo(a);let d=!1;if(!e.resumeFrom){const u=e.getClosestProjectingParent();if(u&&!u.resumeFrom){const{snapshot:f,layout:h}=u;if(f&&h){const g=W();ft(g,n.layoutBox,f.layoutBox);const v=W();ft(v,i,h.layoutBox),Fo(g,v)||(d=!0),u.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=u)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function Xd(e){Ne.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Yd(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Zd(e){e.clearSnapshot()}function Nr(e){e.clearMeasurements()}function Jd(e){e.isLayoutDirty=!1}function Qd(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Wr(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ef(e){e.resolveTargetDelta()}function tf(e){e.calcProjection()}function nf(e){e.resetRotation()}function rf(e){e.removeLeadSnapshot()}function Hr(e,t,n){e.translate=_(t.translate,0,n),e.scale=_(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Kr(e,t,n,i){e.min=_(t.min,n.min,i),e.max=_(t.max,n.max,i)}function sf(e,t,n,i){Kr(e.x,t.x,n.x,i),Kr(e.y,t.y,n.y,i)}function of(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const af={duration:.45,ease:[.4,0,.1,1]},Gr=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),qr=Gr("applewebkit/")&&!Gr("chrome/")?Math.round:H;function Xr(e){e.min=qr(e.min),e.max=qr(e.max)}function cf(e){Xr(e.x),Xr(e.y)}function $o(e,t,n){return e==="position"||e==="preserve-aspect"&&!Bn($r(t),$r(n),.2)}const lf=Bo({attachResizeListener:(e,t)=>Se(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Tn={current:void 0},Uo=Bo({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Tn.current){const e=new lf({});e.mount(window),e.setOptions({layoutScroll:!0}),Tn.current=e}return Tn.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),uf={pan:{Feature:Cd},drag:{Feature:Td,ProjectionNode:Uo,MeasureLayout:ko}},df=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ff(e){const t=df.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function zn(e,t,n=1){const[i,r]=ff(e);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const o=s.trim();return Po(o)?parseFloat(o):o}else return _t(r)?zn(r,t,n+1):r}function hf(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(r=>{const s=r.get();if(!_t(s))return;const o=zn(s,i);o&&r.set(o)});for(const r in t){const s=t[r];if(!_t(s))continue;const o=zn(s,i);o&&(t[r]=o,n||(n={}),n[r]===void 0&&(n[r]=s))}return{target:t,transitionEnd:n}}const pf=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),_o=e=>pf.has(e),mf=e=>Object.keys(e).some(_o),Yr=e=>e===nt||e===E,Zr=(e,t)=>parseFloat(e.split(", ")[t]),Jr=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return Zr(r[1],t);{const s=i.match(/^matrix\((.+)\)$/);return s?Zr(s[1],e):0}},gf=new Set(["x","y","z"]),yf=gt.filter(e=>!gf.has(e));function vf(e){const t=[];return yf.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const et={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Jr(4,13),y:Jr(5,14)};et.translateX=et.x;et.translateY=et.y;const xf=(e,t,n)=>{const i=t.measureViewportBox(),r=t.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(l=>{a[l]=et[l](i,s)}),t.render();const c=t.measureViewportBox();return n.forEach(l=>{const d=t.getValue(l);d&&d.jump(a[l]),e[l]=et[l](c,s)}),e},bf=(e,t,n={},i={})=>{t={...t},i={...i};const r=Object.keys(t).filter(_o);let s=[],o=!1;const a=[];if(r.forEach(c=>{const l=e.getValue(c);if(!e.hasValue(c))return;let d=n[c],u=ot(d);const f=t[c];let h;if(Nt(f)){const g=f.length,v=f[0]===null?1:0;d=f[v],u=ot(d);for(let y=v;y<g&&f[y]!==null;y++)h?yi(ot(f[y])===h):h=ot(f[y])}else h=ot(f);if(u!==h)if(Yr(u)&&Yr(h)){const g=l.get();typeof g=="string"&&l.set(parseFloat(g)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&h===E&&(t[c]=f.map(parseFloat))}else u!=null&&u.transform&&(h!=null&&h.transform)&&(d===0||f===0)?d===0?l.set(h.transform(d)):t[c]=u.transform(f):(o||(s=vf(e),o=!0),a.push(c),i[c]=i[c]!==void 0?i[c]:t[c],l.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,l=xf(t,e,a);return s.length&&s.forEach(([d,u])=>{e.getValue(d).set(u)}),e.render(),tn&&c!==null&&window.scrollTo({top:c}),{target:l,transitionEnd:i}}else return{target:t,transitionEnd:i}};function wf(e,t,n,i){return mf(t)?bf(e,t,n,i):{target:t,transitionEnd:i}}const Pf=(e,t,n,i)=>{const r=hf(e,t,i);return t=r.target,i=r.transitionEnd,wf(e,t,n,i)},Nn={current:null},zo={current:!1};function Sf(){if(zo.current=!0,!!tn)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Nn.current=e.matches;e.addListener(t),t()}else Nn.current=!1}function Tf(e,t,n){const{willChange:i}=t;for(const r in t){const s=t[r],o=n[r];if(ce(s))e.addValue(r,s),Gt(i)&&i.add(r);else if(ce(o))e.addValue(r,Qe(s,{owner:e})),Gt(i)&&i.remove(r);else if(o!==s)if(e.hasValue(r)){const a=e.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,Qe(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Qr=new WeakMap,No=Object.keys(pt),Cf=No.length,es=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Af=oi.length;class jf{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>B.render(this.render,!1,!0);const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=rn(n),this.isVariantNode=Ms(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:l,...d}=this.scrapeMotionValuesFromProps(n,{});for(const u in d){const f=d[u];a[u]!==void 0&&ce(f)&&(f.set(a[u],!1),Gt(l)&&l.add(u))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Qr.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),zo.current||Sf(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Nn.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qr.delete(this.current),this.projection&&this.projection.unmount(),je(this.notifyUpdate),je(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=Ge.has(t),r=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&B.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{r(),s()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,r,s){let o,a;for(let c=0;c<Cf;c++){const l=No[c],{isEnabled:d,Feature:u,ProjectionNode:f,MeasureLayout:h}=pt[l];f&&(o=f),d(n)&&(!this.features[l]&&u&&(this.features[l]=new u(this)),h&&(a=h))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:l,drag:d,dragConstraints:u,layoutScroll:f,layoutRoot:h}=n;this.projection.setOptions({layoutId:c,layout:l,alwaysMeasureLayout:!!d||u&&Xe(u),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:h})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):W()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<es.length;i++){const r=es[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=t["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=Tf(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<Af;i++){const r=oi[i],s=this.props[r];(ht(s)||s===!1)&&(n[r]=s)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=Qe(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(n=mi(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!ce(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ji),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Wo extends jf{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},r){const s=Nu(i,t||{},this);if(r){_u(this,i,s);const o=Pf(this,i,s,n);n=o.transitionEnd,i=o.target}return{transition:t,transitionEnd:n,...i}}}function Ef(e){return window.getComputedStyle(e)}class Vf extends Wo{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Ge.has(n)){const i=Pi(n);return i&&i.default||0}else{const i=Ef(t),r=(Os(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Do(t,n)}build(t,n,i,r){ui(t,n,i,r.transformTemplate)}scrapeMotionValuesFromProps(t,n){return pi(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ce(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,r){zs(t,n,i,r)}}class Rf extends Wo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ge.has(n)){const i=Pi(n);return i&&i.default||0}return n=Ns.has(n)?n:ii(n),t.getAttribute(n)}measureInstanceViewportBox(){return W()}scrapeMotionValuesFromProps(t,n){return Hs(t,n)}build(t,n,i,r){fi(t,n,i,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,i,r){Ws(t,n,i,r)}mount(t){this.isSVGTag=hi(t.tagName),super.mount(t)}}const Df=(e,t)=>ci(e)?new Rf(t,{enableHardwareAcceleration:!1}):new Vf(t,{enableHardwareAcceleration:!0}),Mf={layout:{ProjectionNode:Uo,MeasureLayout:ko}},kf={...rd,...vl,...uf,...Mf},Ho=Vc((e,t)=>sl(e,t,kf,Df));function Ko(){const e=p.useRef(!1);return ni(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Lf(){const e=Ko(),[t,n]=p.useState(0),i=p.useCallback(()=>{e.current&&n(t+1)},[t]);return[p.useCallback(()=>B.postRender(i),[i]),t]}class If extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Of({children:e,isPresent:t}){const n=p.useId(),i=p.useRef(null),r=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:c}=r.current;if(t||!i.current||!s||!o)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),p.createElement(If,{isPresent:t,childRef:i,sizeRef:r},p.cloneElement(e,{ref:i}))}const Cn=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=gi(Ff),c=p.useId(),l=p.useMemo(()=>({id:c,initial:t,isPresent:n,custom:r,onExitComplete:d=>{a.set(d,!0);for(const u of a.values())if(!u)return;i&&i()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[n]);return p.useMemo(()=>{a.forEach((d,u)=>a.set(u,!1))},[n]),p.useEffect(()=>{!n&&!a.size&&i&&i()},[n]),o==="popLayout"&&(e=p.createElement(Of,{isPresent:n},e)),p.createElement(en.Provider,{value:l},e)};function Ff(){return new Map}function Bf(e){return p.useEffect(()=>()=>e(),[])}const We=e=>e.key||"";function $f(e,t){e.forEach(n=>{const i=We(n);t.set(i,n)})}function Uf(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const _f=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:r,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=p.useContext(ai).forceRender||Lf()[0],c=Ko(),l=Uf(e);let d=l;const u=p.useRef(new Map).current,f=p.useRef(d),h=p.useRef(new Map).current,g=p.useRef(!0);if(ni(()=>{g.current=!1,$f(l,h),f.current=d}),Bf(()=>{g.current=!0,h.clear(),u.clear()}),g.current)return p.createElement(p.Fragment,null,d.map(x=>p.createElement(Cn,{key:We(x),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},x)));d=[...d];const v=f.current.map(We),y=l.map(We),P=v.length;for(let x=0;x<P;x++){const b=v[x];y.indexOf(b)===-1&&!u.has(b)&&u.set(b,void 0)}return o==="wait"&&u.size&&(d=[]),u.forEach((x,b)=>{if(y.indexOf(b)!==-1)return;const w=h.get(b);if(!w)return;const T=v.indexOf(b);let S=x;if(!S){const A=()=>{u.delete(b);const C=Array.from(h.keys()).filter(j=>!y.includes(j));if(C.forEach(j=>h.delete(j)),f.current=l.filter(j=>{const R=We(j);return R===b||C.includes(R)}),!u.size){if(c.current===!1)return;a(),i&&i()}};S=p.createElement(Cn,{key:We(w),isPresent:!1,onExitComplete:A,custom:t,presenceAffectsLayout:s,mode:o},w),u.set(b,S)}d.splice(T,0,S)}),d=d.map(x=>{const b=x.key;return u.has(b)?x:p.createElement(Cn,{key:We(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),p.createElement(p.Fragment,null,u.size?d:d.map(x=>p.cloneElement(x)))};function zf({children:e,isValidProp:t,...n}){t&&Us(t),n={...p.useContext($t),...n},n.isStatic=gi(()=>n.isStatic);const i=p.useMemo(()=>n,[JSON.stringify(n.transition),n.transformPagePoint,n.reducedMotion]);return p.createElement($t.Provider,{value:i},e)}async function Go(e,t,n,i,r=ua()){const s=e.withConfig({apiVersion:dc});try{const o=new Date(Date.now()+1e3*fc),a=`${uc}.${r}`,c=function(){if(typeof crypto<"u"){const d=new Uint8Array(16);crypto.getRandomValues(d);let u="";for(let f=0;f<d.length;f++)u+=d[f].toString(16).padStart(2,"0");return u=btoa(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]+$/,""),u}return Math.random().toString(36).slice(2)}(),l=s.patch(a).set({secret:c,source:t,studioUrl:n,userId:i});return await s.transaction().createOrReplace({_id:a,_type:js}).patch(l).commit({tag:pc}),{secret:c,expiresAt:o}}finally{await s.delete({query:hc})}}function Nf(e){for(var t=[],n=0;n<e.length;){var i=e[n];if(i==="*"||i==="+"||i==="?"){t.push({type:"MODIFIER",index:n,value:e[n++]});continue}if(i==="\\"){t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});continue}if(i==="{"){t.push({type:"OPEN",index:n,value:e[n++]});continue}if(i==="}"){t.push({type:"CLOSE",index:n,value:e[n++]});continue}if(i===":"){for(var r="",s=n+1;s<e.length;){var o=e.charCodeAt(s);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===95){r+=e[s++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(n));t.push({type:"NAME",index:n,value:r}),n=s;continue}if(i==="("){var a=1,c="",s=n+1;if(e[s]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(s));for(;s<e.length;){if(e[s]==="\\"){c+=e[s++]+e[s++];continue}if(e[s]===")"){if(a--,a===0){s++;break}}else if(e[s]==="("&&(a++,e[s+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(s));c+=e[s++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(n));if(!c)throw new TypeError("Missing pattern at ".concat(n));t.push({type:"PATTERN",index:n,value:c}),n=s;continue}t.push({type:"CHAR",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}function Wf(e,t){t===void 0&&(t={});for(var n=Nf(e),i=t.prefixes,r=i===void 0?"./":i,s="[^".concat(qe(t.delimiter||"/#?"),"]+?"),o=[],a=0,c=0,l="",d=function(S){if(c<n.length&&n[c].type===S)return n[c++].value},u=function(S){var A=d(S);if(A!==void 0)return A;var C=n[c],j=C.type,R=C.index;throw new TypeError("Unexpected ".concat(j," at ").concat(R,", expected ").concat(S))},f=function(){for(var S="",A;A=d("CHAR")||d("ESCAPED_CHAR");)S+=A;return S};c<n.length;){var h=d("CHAR"),g=d("NAME"),v=d("PATTERN");if(g||v){var y=h||"";r.indexOf(y)===-1&&(l+=y,y=""),l&&(o.push(l),l=""),o.push({name:g||a++,prefix:y,suffix:"",pattern:v||s,modifier:d("MODIFIER")||""});continue}var P=h||d("ESCAPED_CHAR");if(P){l+=P;continue}l&&(o.push(l),l="");var x=d("OPEN");if(x){var y=f(),b=d("NAME")||"",w=d("PATTERN")||"",T=f();u("CLOSE"),o.push({name:b||(w?a++:""),pattern:b&&!w?s:w,prefix:y,suffix:T,modifier:d("MODIFIER")||""});continue}u("END")}return o}function Hf(e,t){var n=[],i=Xo(e,n,t);return Kf(i,n,t)}function Kf(e,t,n){n===void 0&&(n={});var i=n.decode,r=i===void 0?function(s){return s}:i;return function(s){var o=e.exec(s);if(!o)return!1;for(var a=o[0],c=o.index,l=Object.create(null),d=function(f){if(o[f]===void 0)return"continue";var h=t[f-1];h.modifier==="*"||h.modifier==="+"?l[h.name]=o[f].split(h.prefix+h.suffix).map(function(g){return r(g,h)}):l[h.name]=r(o[f],h)},u=1;u<o.length;u++)d(u);return{path:a,index:c,params:l}}}function qe(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function qo(e){return e&&e.sensitive?"":"i"}function Gf(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,r=n.exec(e.source);r;)t.push({name:r[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),r=n.exec(e.source);return e}function qf(e,t,n){var i=e.map(function(r){return Xo(r,t,n).source});return new RegExp("(?:".concat(i.join("|"),")"),qo(n))}function Xf(e,t,n){return Yf(Wf(e,n),t,n)}function Yf(e,t,n){n===void 0&&(n={});for(var i=n.strict,r=i===void 0?!1:i,s=n.start,o=s===void 0?!0:s,a=n.end,c=a===void 0?!0:a,l=n.encode,d=l===void 0?function(R){return R}:l,u=n.delimiter,f=u===void 0?"/#?":u,h=n.endsWith,g=h===void 0?"":h,v="[".concat(qe(g),"]|$"),y="[".concat(qe(f),"]"),P=o?"^":"",x=0,b=e;x<b.length;x++){var w=b[x];if(typeof w=="string")P+=qe(d(w));else{var T=qe(d(w.prefix)),S=qe(d(w.suffix));if(w.pattern)if(t&&t.push(w),T||S)if(w.modifier==="+"||w.modifier==="*"){var A=w.modifier==="*"?"?":"";P+="(?:".concat(T,"((?:").concat(w.pattern,")(?:").concat(S).concat(T,"(?:").concat(w.pattern,"))*)").concat(S,")").concat(A)}else P+="(?:".concat(T,"(").concat(w.pattern,")").concat(S,")").concat(w.modifier);else w.modifier==="+"||w.modifier==="*"?P+="((?:".concat(w.pattern,")").concat(w.modifier,")"):P+="(".concat(w.pattern,")").concat(w.modifier);else P+="(?:".concat(T).concat(S,")").concat(w.modifier)}}if(c)r||(P+="".concat(y,"?")),P+=n.endsWith?"(?=".concat(v,")"):"$";else{var C=e[e.length-1],j=typeof C=="string"?y.indexOf(C[C.length-1])>-1:C===void 0;r||(P+="(?:".concat(y,"(?=").concat(v,"))?")),j||(P+="(?=".concat(y,"|").concat(v,")"))}return new RegExp(P,qo(n))}function Xo(e,t,n){return e instanceof RegExp?Gf(e,t):Array.isArray(e)?qf(e,t,n):Xf(e,t,n)}function Zf(e){const{draftMode:t,previewMode:n,origin:i=typeof location>"u"?"https://localhost":location.origin}=e,r=(n==null?void 0:n.enable)||(t==null?void 0:t.enable);let{preview:s="/"}=e;const o=new URL(s,i),a=r?new URL(r,i):void 0;return async c=>{try{if(c.previewSearchParam){const d=new URL(c.previewSearchParam,o);d.origin===o.origin&&(s=`${d.pathname}${d.search}`)}else if(c.referrer){const d=new URL(c.referrer);d.origin===o.origin&&(s=`${d.pathname}${d.search}`)}}catch{}typeof location<"u"&&location.origin===o.origin&&c.studioBasePath&&(s.startsWith(`${c.studioBasePath}/`)||s===c.studioBasePath)&&(s=e.preview||"/");const l=new URL(s,o);if(a){const d=new URL(a),{searchParams:u}=d;return u.set(Jt,c.previewUrlSecret),l.pathname!==d.pathname&&u.set(ti,`${l.pathname}${l.search}`),d.toString()}return l.toString()}}const Jf=e=>typeof e=="object"&&typeof e.then=="function",jt=[];function Qf(e,t,n=(i,r)=>i===r){if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}function eh(e,t=null,n=!1,i={}){t===null&&(t=[e]);for(const s of jt)if(Qf(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,remove:()=>{const s=jt.indexOf(r);s!==-1&&jt.splice(s,1)},promise:(Jf(e)?e:e(...t)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(jt.push(r),!n)throw r.promise}const ts=(e,t,n)=>eh(e,t,!1,n);var th=Object.defineProperty,nh=(e,t,n)=>((i,r,s)=>r in i?th(i,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[r]=s)(e,typeof t!="symbol"?t+"":t,n);let Et;const ih=new Uint8Array(16);function rh(){if(!Et&&(Et=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Et))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Et(ih)}const ee=[];for(let e=0;e<256;++e)ee.push((e+256).toString(16).slice(1));var ns={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Mt(e,t,n){if(ns.randomUUID&&!t&&!e)return ns.randomUUID();const i=(e=e||{}).random||(e.rng||rh)();return i[6]=15&i[6]|64,i[8]=63&i[8]|128,function(r,s=0){return ee[r[s+0]]+ee[r[s+1]]+ee[r[s+2]]+ee[r[s+3]]+"-"+ee[r[s+4]]+ee[r[s+5]]+"-"+ee[r[s+6]]+ee[r[s+7]]+"-"+ee[r[s+8]]+ee[r[s+9]]+"-"+ee[r[s+10]]+ee[r[s+11]]+ee[r[s+12]]+ee[r[s+13]]+ee[r[s+14]]+ee[r[s+15]]}(i)}const sh=1e3,oh=1e3,ah=500,ch=["handshake/syn","handshake/syn-ack","handshake/ack"],is=e=>ch.some(t=>t===e),lh=({data:e={}})=>typeof e=="object"&&e!==null&&!Array.isArray(e)&&!("domain"in e)&&["id","type","from","to"].every(t=>t in e)&&e.type.startsWith("handshake/");function rs(e){const t=e.target,n=e.connectTo.map(u=>({buffer:[],config:u,id:"",handler:r,status:"connecting",interval:void 0,heartbeat:void 0}));function i(u){window.clearInterval(u.interval)}function r(u){const{data:f}=u;if(is(f.type)){const h=n.find(g=>g.config.id===f.from);h&&f.type==="handshake/syn-ack"&&(c(h,"connected"),l(h,"handshake/ack",{id:h.id}))}}const s=u=>{var f,h,g;const v=u.data;if(!is(v.type)&&n.find(y=>y.id===v.connectionId)){const y=n.find(P=>P.config.id===v.from);if(y){const P=[v.type,v.data];(h=(f=y.config).onEvent)==null||h.call(f,...P),(g=e.onEvent)==null||g.call(e,...P),d(y,"channel/response",{responseTo:v.id},!1)}}};function o(u){var f;if(lh(u))console.error(`Visual editing package mismatch detected! Please ensure you are using the latest version of Sanity Studio and any packages listed here:
https://github.com/sanity-io/visual-editing`);else if(function(h){const{data:g,origin:v}=h;return g.domain==="sanity/channels"&&g.to==e.id&&n.map(y=>y.config.id).includes(g.from)&&g.type!=="channel/response"&&v===e.targetOrigin}(u)){const{data:h}=u;(f=n.find(g=>g.config.id===h.from))==null||f.handler(u)}}function a(u){u.heartbeat&&window.clearInterval(u.heartbeat)}function c(u,f){var h,g,v;u.status=f,(g=(h=u.config).onStatusUpdate)==null||g.call(h,f,u.config.id),(v=e.onStatusUpdate)==null||v.call(e,f,u.config.id),f==="connecting"||f==="reconnecting"?(u.handler=r,a(u),function(y){y.id=Mt(),y.interval=window.setInterval(()=>{l(y,"handshake/syn",{id:y.id})},ah)}(u)):f==="connected"?(u.handler=s,i(u),function(y){if(a(y),y.config.heartbeat){const P=typeof y.config.heartbeat=="number"?y.config.heartbeat:oh;y.heartbeat=window.setInterval(()=>{d(y,"channel/heartbeat")},P)}}(u),function(y){const P=[...y.buffer];y.buffer.splice(0,y.buffer.length),P.forEach(({type:x,data:b})=>{d(y,x,b)})}(u)):f==="disconnected"&&(u.id=null,u.handler=r,i(u),a(u))}function l(u,f,h){if(!u.id)throw new Error("No channel ID set");const g={connectionId:u.id,data:h,domain:"sanity/channels",from:e.id,id:Mt(),to:u.config.id,type:f};try{t==null||t.postMessage(g,{targetOrigin:"*"})}catch{throw new Error(`Failed to postMessage '${g.id}' on '${e.id}'`)}}function d(u,f,h,g=!0){const v=Mt();if(u.status==="connecting"||u.status==="reconnecting"||u.status==="disconnected")return void u.buffer.push({type:f,data:h});if(!u.id)throw new Error("No channel ID set");const y={connectionId:u.id,data:h,domain:"sanity/channels",from:e.id,id:v,to:u.config.id,type:f};if(g){const P=setTimeout(()=>{y.connectionId===u.id&&(window.removeEventListener("message",x,!1),f!=="channel/heartbeat"&&u.buffer.push({type:f,data:h}),c(u,"reconnecting"),console.warn(`Received no response to message '${y.type}' on client '${e.id}' (ID: '${y.id}').`))},sh),x=b=>{var w;const{data:T}=b;T.type==="channel/response"&&(w=T.data)!=null&&w.responseTo&&T.data.responseTo===y.id&&(window.removeEventListener("message",x,!1),clearTimeout(P))};window.addEventListener("message",x,!1)}try{t==null||t.postMessage(y,{targetOrigin:e.targetOrigin})}catch{throw new Error(`Failed to postMessage '${y.id}' on client '${e.id}'`)}}return window.addEventListener("message",o,!1),n.forEach(u=>{c(u,"connecting")}),{destroy:function(){n.forEach(u=>{["disconnected"].includes(u.status)||(d(u,"channel/disconnect",{id:u.id},!1),c(u,"disconnected"))}),window.removeEventListener("message",o,!1),n.forEach(u=>{a(u),i(u)})},send:function(u,f,h){(u?Array.isArray(u)?[...u]:[u]:n).forEach(g=>{const v=n.find(y=>y.config.id===g);if(!v)throw new Error("Invalid channel ID");d(v,f,h)})}}}var uh=class extends Error{constructor(e){super(e[0].message),nh(this,"issues"),this.name="ValiError",this.issues=e}};function Wn(e,t){return Array.isArray(e)?[void 0,e]:[e,t]}function Yo(e,t,n,i,r){var s,o,a,c,l;const d=(l=(c=(a=(o=(s=t.message)!=null?s:function(u,f){var h;return(h=void 0)==null?void 0:h.get(f)}(n,r.lang))!=null?o:e?(r.lang,void 0):null)!=null?a:i==null?void 0:i.message)!=null?c:function(u){}(r.lang))!=null?l:r.message;return typeof d=="function"?d(r):d}function an(e,t,n){return{typed:e,output:t,issues:n}}function Ei(e){let t=typeof e;return t==="object"&&(t=e?Object.getPrototypeOf(e).constructor.name:"null"),t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t}function dh(e,t,n){var i;const r=(i=n.received)!=null?i:Ei(n.input),s={reason:e.type,context:n.context.type,expected:n.context.expects,received:r,message:`Invalid ${n.label}: ${n.context.expects?`Expected ${n.context.expects} but r`:"R"}eceived ${r}`,input:n.input,requirement:n.context.requirement,path:n.path,lang:t==null?void 0:t.lang,abortEarly:t==null?void 0:t.abortEarly,abortPipeEarly:t==null?void 0:t.abortPipeEarly,skipPipe:t==null?void 0:t.skipPipe};return s.message=Yo(!1,n.context,n.reference,t,s),s}function Zo(e,t,n,i){if(e.pipe&&(n==null||!n.skipPipe))for(const r of e.pipe){const s=r._parse(t);if(s.issues){for(const o of s.issues){const a=dh(e,n,o);i?i.push(a):i=[a]}if(n!=null&&n.abortEarly||n!=null&&n.abortPipeEarly)break}else t=s.output}return an(!0,t,i)}function Vi(e,t,n,i,r){var s,o;const a=Ei(n),c=(s=r==null?void 0:r.expected)!=null?s:e.expects,l={reason:(o=r==null?void 0:r.reason)!=null?o:"type",context:e.type,expected:c,received:a,message:`Invalid type: Expected ${c} but received ${a}`,input:n,path:r==null?void 0:r.path,issues:r==null?void 0:r.issues,lang:i==null?void 0:i.lang,abortEarly:i==null?void 0:i.abortEarly,abortPipeEarly:i==null?void 0:i.abortPipeEarly,skipPipe:i==null?void 0:i.skipPipe};return l.message=Yo(!0,e,t,i,l),{typed:!1,output:n,issues:[l]}}function Ri(e,t){return{...e,fallback:t,_parse(n,i){const r=e._parse(n,i);return r.issues?an(!0,function(s,o){return typeof s.fallback=="function"?s.fallback(o):s.fallback}(this,{input:n,issues:r.issues})):r}}}function Di(e,t){const[n,i]=Wn(e,t);return{type:"boolean",expects:"boolean",async:!1,message:n,pipe:i,_parse(r,s){return typeof r=="boolean"?Zo(this,r,s):Vi(this,Di,r,s)}}}function kt(e,t,n,i){const[r,s,o]=function(c,l,d){if(!c||typeof c=="object"&&!Array.isArray(c)){const[h,g]=Wn(l,d);return[c,h,g]}const[u,f]=Wn(c,l);return[void 0,u,f]}(t,n,i);let a;return{type:"object",expects:"Object",async:!1,entries:e,rest:r,message:s,pipe:o,_parse(c,l){if(c&&typeof c=="object"){a=a??Object.entries(this.entries);let d,u=!0;const f={};for(const[h,g]of a){const v=c[h],y=g._parse(v,l);if(y.issues){const P={type:"object",origin:"value",input:c,key:h,value:v};for(const x of y.issues)x.path?x.path.unshift(P):x.path=[P],d==null||d.push(x);if(d||(d=y.issues),l!=null&&l.abortEarly){u=!1;break}}y.typed||(u=!1),(y.output!==void 0||h in c)&&(f[h]=y.output)}if(this.rest&&(l==null||!l.abortEarly||!d)){for(const h in c)if(!(h in this.entries)){const g=c[h],v=this.rest._parse(g,l);if(v.issues){const y={type:"object",origin:"value",input:c,key:h,value:g};for(const P of v.issues)P.path?P.path.unshift(y):P.path=[y],d==null||d.push(P);if(d||(d=v.issues),l!=null&&l.abortEarly){u=!1;break}}v.typed||(u=!1),f[h]=v.output}}return u?Zo(this,f,l,d):an(!1,f,d)}return Vi(this,kt,c,l)}}}function cn(e,t){return{type:"picklist",expects:e.map(Ei).join(" | "),async:!1,options:e,message:t,_parse(n,i){return this.options.includes(n)?an(!0,n):Vi(this,cn,n,i)}}}function Hn(e,t,n){const i=e._parse(t,function(r){var s,o,a,c;return{lang:(s=r==null?void 0:r.lang)!=null?s:void 0,message:r==null?void 0:r.message,abortEarly:(o=r==null?void 0:r.abortEarly)!=null?o:void 0,abortPipeEarly:(a=r==null?void 0:r.abortPipeEarly)!=null?a:void 0,skipPipe:(c=r==null?void 0:r.skipPipe)!=null?c:void 0}}(n));if(i.issues)throw new uh(i.issues);return i.output}const fh=/^([A-Za-z]+):([0-9]+)$/,hh=/^([A-Za-z]+):([0-9]+),([0-9]+)$/,ph=/^([A-Za-z]+):([a-z0-9]+)$/;function mh(e,t){return`${e}-${typeof t=="string"?t:JSON.stringify(t)}`}const ss={alt:"altKey",ctrl:"ctrlKey",mod:typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"metaKey":"ctrlKey",shift:"shiftKey"};function os(e){return e.key==="Alt"}function Jo(e,t){let n;return(...i)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(e,i)},t)}}const ln=p.createContext(null);ln.displayName="PanelsContext";const gh=Pe.div`
  overflow: hidden;
  flex-basis: 0;
  flex-shrink: 1;
`,Mi=function({children:e,defaultSize:t=null,id:n,minWidth:i,maxWidth:r,order:s=0}){const o=p.useContext(ln);if(o===null)throw Error("Panel components must be rendered within a PanelGroup container");const{getPanelStyle:a,registerElement:c,unregisterElement:l}=o,d=a(n);return p.useLayoutEffect(()=>(c(n,{id:n,type:"panel",defaultSize:t,maxWidth:r??null,minWidth:i??0,order:s}),()=>{l(n)}),[n,t,s,r,i,c,l]),m.jsx(gh,{style:d,children:e})},Qo="presentation/panels",as=()=>JSON.parse(localStorage.getItem(Qo)||"{}"),cs=e=>e.map(t=>[t.id,t.order].join(":")).join(",");function yh(){return p.useMemo(()=>{const e=(t,n)=>{const i=as(),r=cs(t);(s=>{localStorage.setItem(Qo,JSON.stringify(s))})({...i,[r]:n})};return{get:t=>{const n=as(),i=cs(t);return Array.isArray(n[i])&&n[i].some(r=>r===null)?void 0:n[i]},set:e,setDebounced:Jo(e,100)}},[])}function Kn(e,t,n){const{maxWidth:i,minWidth:r}=e,s=i==null?100:i/n*100,o=r/n*100;return Math.min(s,Math.max(o,t))}function vh(e,t,n){if(e.length===1)return"100";const i=n[e.findIndex(r=>r.id===t)];return i==null?"0":i.toPrecision(10)}function ls(e,t,n=0,i=null){return e.clientX-(i||t.getBoundingClientRect()).left-n}function An(e){return e.type==="panel"}function us(e){return e.type==="resizer"}function ds(e){return Array.from(e.values()).sort(({order:t},{order:n})=>t==null&&n==null?0:t==null?-1:n==null?1:t-n)}function fs(e,t,n){const i=t.reduce((o,a)=>o+a,0),r=[...t].map(o=>o/i*100);let s=0;for(let o=0;o<e.length;o++){const a=e[o],c=r[o],l=Kn(a,c,n);c!=l&&(s+=c-l,r[o]=l)}if(s.toFixed(3)!=="0.000")for(let o=0;o<e.length;o++){const a=e[o];let{maxWidth:c,minWidth:l}=a;l=l/n*100,c!=null&&(c=c/n*100);const d=Math.min(c??100,Math.max(l,r[o]+s));if(d!==r[o]&&(s-=d-r[o],r[o]=d,Math.abs(s).toFixed(3)==="0.000"))break}return r}const xh=Pe.div`
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  width: 100%;
`,bh=function({children:e}){const t=p.useRef(null),[n,i]=p.useState(new Map),r=p.useMemo(()=>ds(n).filter(An),[n]),[s,o]=p.useState([]),[a,c]=p.useState(null),l=p.useRef({elements:n,panels:r,widths:s}),d=p.useCallback(b=>({flexGrow:vh(r,b,s),pointerEvents:a===null?void 0:"none"}),[a,r,s]),u=p.useCallback((b,w)=>{i(T=>{if(T.has(b))return T;const S=new Map(T);return S.set(b,w),S})},[]),f=p.useCallback(b=>{i(w=>{if(!w.has(b))return w;const T=new Map(w);return T.delete(b),T})},[]),h=p.useRef({containerWidth:window.innerWidth,dragOffset:0,panelAfter:null,panelBefore:null,resizerIndex:-1,resizerRect:null,startX:0,widths:[]}),g=p.useCallback((b,w)=>{const T=ds(n),S=T.findIndex(j=>j.id===b),A=n.get(b);if(!A||!us(A))return;const C=A.el.current;C&&(h.current={resizerIndex:S,panelBefore:T.reduce((j,R,O)=>An(R)&&O<S?R:j,null),panelAfter:T.reduce((j,R,O)=>j===null&&An(R)&&O>S?R:j,null),containerWidth:window.innerWidth,startX:w.pageX,dragOffset:ls(w,C),resizerRect:C.getBoundingClientRect(),widths:l.current.widths},c(b))},[n]),v=p.useCallback(()=>{c(null)},[]),y=p.useCallback((b,w)=>{w.preventDefault(),w.stopPropagation();const{containerWidth:T,dragOffset:S,panelBefore:A,panelAfter:C,resizerRect:j}=h.current;if(A==null||C==null)return;const R=n.get(b);if(!R||!us(R))return;const O=R.el.current;if(!O)return;const $=ls(w,O,S,j);if($===0)return;const{widths:G}=l.current,F=function(z,I,Y,N,le,ue){const{panels:D,widths:Z}=le,{widths:Ee}=ue,U=Ee||Z,de=[...U];{const ae=z<0?N:Y,se=U[D.findIndex(bt=>bt.id===ae.id)],J=Kn(ae,se+Math.abs(z),I);if(se===J)return U;z=z<0?se-J:J-se}let re=0,Ve=z<0?Y:N,ne=D.findIndex(ae=>ae.id===Ve.id);for(;;){const ae=D[ne],se=U[ne],J=Kn(ae,se-(Math.abs(z)-Math.abs(re)),I);if(se!==J&&(re+=se-J,de[ne]=J,re.toPrecision(10).localeCompare(Math.abs(z).toPrecision(10),void 0,{numeric:!0})>=0))break;if(z<0){if(--ne<0)break}else if(++ne>=D.length)break}return re===0?U:(Ve=z<0?N:Y,ne=D.findIndex(ae=>ae.id===Ve.id),de[ne]=U[ne]+re,de)}($/t.current.getBoundingClientRect().width*100,T,A,C,l.current,h.current);G.some((z,I)=>z!==F[I])&&o(F)},[n]);p.useLayoutEffect(()=>{l.current.elements=n,l.current.panels=r,l.current.widths=s},[n,r,s]);const P=yh();p.useLayoutEffect(()=>{const{widths:b}=l.current;if(b.length===r.length)return;const w=P.get(r);if(w){const S=fs(r,w,window.innerWidth);return void o(S)}const T=function(S){let A=S.length,C=100;const j=S.map(O=>O.defaultSize?(C-=O.defaultSize,A-=1,O.defaultSize):null),R=C/A;return j.map(O=>O===null?R:O)}(r);o(T)},[P,r]),p.useEffect(()=>{s.length&&P.setDebounced(r,s)},[P,r,s]),p.useLayoutEffect(()=>{const b=new ResizeObserver(()=>{const{panels:w,widths:T}=l.current,S=fs(w,T,window.innerWidth);T.some((A,C)=>A!==S[C])&&o(S)});return b.observe(t.current),()=>{b.disconnect()}},[]);const x=p.useMemo(()=>({activeResizer:a,drag:y,getPanelStyle:d,registerElement:u,startDragging:g,stopDragging:v,unregisterElement:f}),[a,y,d,u,g,v,f]);return m.jsx(ln.Provider,{value:x,children:m.jsx(xh,{ref:t,children:e})})};function ki(e){const{children:t,message:n,onRetry:i,onContinueAnyway:r,...s}=e,{t:o}=Be($e),a=m.jsx(be,{fontSize:1,mode:"ghost",onClick:i,text:o("error-card.retry-button.text")}),c=m.jsx(be,{fontSize:1,mode:"ghost",tone:"critical",onClick:r,text:o("error-card.continue-button.text")});return m.jsx(ve,{height:"fill",...s,children:m.jsx(X,{align:"center",height:"fill",justify:"center",children:m.jsx(Ea,{padding:4,sizing:"border",width:0,children:m.jsxs(Le,{space:4,children:[m.jsxs(Le,{space:3,children:[m.jsx(K,{size:1,weight:"semibold",children:o("error-card.title")}),m.jsx(K,{muted:!0,size:1,children:n})]}),t,i&&r?m.jsxs(Va,{space:2,children:[a,c]}):i?m.jsx(oe,{children:a}):r?m.jsx(oe,{children:c}):null]})})})})}function wh(e){const t=["comment","inspect","instruction","pathKey","rev","since","template","prefersLatestPublished","view"];return function(n={}){const i=Object.entries(n).map(([r,s])=>`${r}=${s}`).join("&");return i.length?`?${i}`:""}(Object.entries(e).filter(([n])=>t.includes(n)).reduce((n,[i,r])=>r==null?n:{...n,[i]:r},{}))}const Ph=p.forwardRef(function(e,t){const{params:n,structureParams:i}=tt();return m.jsx(Yt,{...e,ref:t,state:{type:void 0,_searchParams:Object.entries({...i,perspective:n.perspective,preview:n.preview})},title:void 0})}),Sh=p.forwardRef(function(e,t){const{documentId:n,documentType:i,parentRefPath:r,template:s,previewUrl:o,...a}=e,{params:c}=tt();return m.jsx(Yt,{...a,ref:t,state:{id:n,type:i,_searchParams:Object.entries({preview:o,prefersLatestPublished:c.perspective==="published"?"true":void 0})},title:void 0})});function ea(e){const{children:t,onStructureParams:n,params:i,previewUrl:r,refs:s}=e,{state:o,resolvePathFromState:a}=Zn(),c=xs(Object.fromEntries(o._searchParams||[])),l=p.useCallback(u=>`${a(o)}${wh({...c,...u})}`,[a,c,o]),d=p.useMemo(()=>({index:0,groupIndex:0,siblingIndex:0,payload:{},params:i,hasGroupSiblings:!1,groupLength:1,routerPanesState:[],ChildLink:u=>{const{childId:f,...h}=u,g=s==null?void 0:s.find(y=>y._id===f||Jn(y._id)===f),{params:v}=tt();return g?m.jsx(Yt,{...h,state:{id:f,type:g._type,_searchParams:Object.entries({preview:r,prefersLatestPublished:v.perspective==="published"?"true":void 0})}}):m.jsx("div",{...h})},BackLink:Ph,ReferenceChildLink:u=>m.jsx(Sh,{...u,previewUrl:r}),ParameterizedLink:()=>m.jsx(m.Fragment,{children:"ParameterizedLink"}),closeCurrentAndAfter:()=>{console.warn("closeCurrentAndAfter")},handleEditReference:u=>{console.warn("handleEditReference",u)},replaceCurrent:u=>{console.warn("replaceCurrent",u)},closeCurrent:()=>{console.warn("closeCurrent")},duplicateCurrent:u=>{console.warn("duplicateCurrent",u)},setView:u=>{console.warn("setView",u)},setParams:u=>{var f;n({...u,inspect:(f=u.inspect)!=null?f:void 0})},setPayload:u=>{console.warn("setPayload",u)},navigateIntent:(u,f,h)=>{console.warn("navigateIntent",u,f,h)},createPathWithParams:l}),[l,n,i,r,s]);return m.jsx(Ga.Provider,{value:d,children:t})}const Th=Pe(ws)`
  height: 100%;
`,Ch=Pe(X)`
  & > div {
    min-width: none !important;
    max-width: none !important;
  }
`,Ah=Pe(Ot)`
  white-space: pre-wrap;
`;function jh(e){const{mainDocumentState:t,onStructureParams:n,previewUrl:i,refs:r}=e,{t:s}=Be($e),{devMode:o}=tt(),a=p.useMemo(()=>r.filter(h=>{var g;return Jn(h._id)!==((g=t==null?void 0:t.document)==null?void 0:g._id)}).map(h=>h._id),[t,r]),c=p.useMemo(()=>({id:"$root",options:{filter:"_id in $ids",params:{ids:a}},schemaTypeName:"",title:s("document-list-pane.document-list.title"),type:"documentList"}),[a,s]),[l,d]=p.useState(null),u=p.useCallback(()=>d(null),[]),[f]=p.useState(()=>({}));return p.useEffect(()=>d(null),[r]),l?m.jsx(ki,{flex:1,message:s("document-list-pane.error.text"),onRetry:u,children:o&&m.jsx(ve,{overflow:"auto",padding:3,radius:2,tone:"critical",children:m.jsxs(Le,{space:3,children:[m.jsx(It,{muted:!0,size:0,children:s("presentation-error.label")}),m.jsx(Ah,{size:1,children:l.error.message})]})})}):m.jsx(Ps,{onCatch:d,children:m.jsx(Th,{children:m.jsx(Ss,{children:m.jsx(ea,{onStructureParams:n,params:f,previewUrl:i,refs:r,children:m.jsx(Ch,{direction:"column",flex:1,children:m.jsx(Ka,{index:0,itemId:"$root",pane:c,paneKey:"$root"})})})})})})}const Eh=Pe(Ot)`
  white-space: pre-wrap;
`;function Vh(e){const{documentId:t,documentType:n,onFocusPath:i,onStructureParams:r,params:s,previewUrl:o}=e,{template:a,templateParams:c}=s,{t:l}=Be($e),{devMode:d}=tt(),u=p.useMemo(()=>({id:t,options:{id:t,type:n,template:a,templateParameters:qa(c)},title:"",type:"document"}),[t,n,a,c]),[f,h]=p.useState(null),g=p.useCallback(()=>h(null),[]);return p.useEffect(()=>{h(null)},[t,n,s]),f?m.jsx(ki,{flex:1,message:l("document-pane.error.text"),onRetry:g,children:d&&m.jsx(ve,{overflow:"auto",padding:3,radius:2,tone:"critical",children:m.jsxs(Le,{space:3,children:[m.jsx(It,{muted:!0,size:0,children:l("presentation-error.label")}),m.jsx(Eh,{size:1,children:f.error.message})]})})}):m.jsx(Ps,{onCatch:h,children:m.jsx(ws,{style:{height:"100%"},children:m.jsx(ea,{onStructureParams:r,params:s,previewUrl:o,children:m.jsx(Xa,{paneKey:"document",index:1,itemId:"document",pane:u,onFocusPath:i})})})})}function Rh(e){const{documentId:t,documentType:n,onFocusPath:i,onStructureParams:r,previewUrl:s,structureParams:o}=e;return m.jsx(Ss,{children:m.jsx(Vh,{documentId:t,documentType:n,onFocusPath:i,onStructureParams:r,params:o,previewUrl:s})})}function Dh(e){const{documentId:t,documentType:n,mainDocumentState:i,onFocusPath:r,onStructureParams:s,previewUrl:o,refs:a,structureParams:c}=e,{t:l}=Be($e),d=_a(),u=p.useCallback(f=>m.jsx(Yt,{...f,state:{id:i.document._id,type:i.document._type,_searchParams:Object.entries({preview:o})}}),[i,o]);return t&&n?m.jsx(Rh,{documentId:t,documentType:n,onFocusPath:r,onStructureParams:s,previewUrl:o,structureParams:c}):m.jsxs(X,{direction:"column",flex:1,height:"fill",children:[i&&m.jsx(ve,{padding:3,tone:i.document?"inherit":"caution",children:i.document?m.jsx(ve,{as:u,"data-as":"a",padding:0,radius:2,children:m.jsx(za,{schemaType:d.get(i.document._type),status:m.jsx(Na,{children:l("main-document.label")}),value:i.document})}):m.jsx(ve,{padding:2,radius:2,tone:"inherit",children:m.jsxs(X,{gap:3,children:[m.jsx(oe,{flex:"none",children:m.jsx(K,{size:1,children:m.jsx(Wa,{})})}),m.jsx(oe,{flex:1,children:m.jsx(K,{size:1,children:m.jsx(Ha,{t:l,i18nKey:"main-document.missing.text",components:{Code:"code"},values:{path:i.path}})})})]})})}),m.jsx(jh,{mainDocumentState:i,onStructureParams:s,previewUrl:o,refs:a})]})}const Mh=Pe.div`
  position: relative;
`,kh=Pe.div`
  position: absolute;
  top: 0;
  bottom: 0;
  left: -5px;
  width: 9px;
  z-index: 10;
  cursor: ${({$disabled:e})=>e?"auto":"ew-resize"};

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    left: 4px;
    bottom: 0;
    transition: opacity 200ms;
  }

  ${({$disabled:e})=>!e&&`
    /* Hover effect */
    & > span:nth-child(2) {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    @media (hover: hover) {
      &:hover > span:nth-child(2) {
        opacity: 0.2;
      }
    }
  `}
`,ta=function({id:e,order:t,disabled:n=!1}){const i=p.useRef(null),r=p.useContext(ln);if(r===null)throw Error("Panel components must be rendered within a PanelGroup container");const s=function(y){return p.useRef(y||Mt()).current}(e),{activeResizer:o,drag:a,startDragging:c,stopDragging:l,registerElement:d,unregisterElement:u}=r,f=o===s;if(r===null)throw Error("Panel components must be rendered within a PanelGroup container");const h=p.useCallback(y=>{c(s,y.nativeEvent)},[s,c]),g=p.useCallback(y=>{a(s,y)},[s,a]),v=p.useCallback(()=>{i.current.blur(),l()},[l]);return p.useEffect(()=>{if(f&&!n)return window.addEventListener("mousemove",g),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)}},[n,f,g,v]),p.useLayoutEffect(()=>(d(s,{id:s,order:t,type:"resizer",el:i}),()=>{u(s)}),[s,t,d,u]),m.jsx(Mh,{onMouseDown:h,ref:i,children:m.jsxs(kh,{$disabled:n,children:[m.jsx("span",{}),m.jsx("span",{})]})})},Lh=e=>{const{documentId:t,setDisplayedDocument:n,getCommentIntent:i}=e;return m.jsxs(m.Fragment,{children:[m.jsx(ta,{order:4}),m.jsx(Mi,{id:"content",minWidth:325,order:5,children:m.jsx(Za,{documentId:t,setDisplayedDocument:n,children:m.jsx(Ja,{getIntent:i,children:e.children})})})]})},Ih=e=>{const{documentsOnPage:t,getCommentIntent:n,mainDocumentState:i,onFocusPath:r,onStructureParams:s,params:o,setDisplayedDocument:a,structureParams:c}=e;return m.jsx(Lh,{documentId:o.id,getCommentIntent:n,setDisplayedDocument:a,children:m.jsx(Dh,{documentId:o.id,documentType:o.type,mainDocumentState:i,onFocusPath:r,onStructureParams:s,previewUrl:o.preview,refs:t,structureParams:c})})},Oh=function(e){const{children:t,navigate:n}=e,i=p.useCallback((r,s=void 0)=>{n(s||{},r?{preview:r}:{})},[n]);return m.jsx(Ra.Provider,{value:i,children:t})};function Fh(e){const{unstable_navigator:t}=e,n=!(t==null||!t.component),[i,r]=function(c,l){const[d,u]=p.useState(()=>{var f;return JSON.parse((f=localStorage.getItem(c))!=null?f:JSON.stringify(l))});return p.useEffect(()=>{localStorage.setItem(c,JSON.stringify(d))},[c,d]),[d,u]}("presentation/navigator",n),s=!!n&&i,o=p.useMemo(()=>{if(n)return()=>r(c=>!c)},[n,r]),a=p.useCallback(function(){return m.jsx(m.Fragment,{children:s&&m.jsx(Bh,{...t})})},[s,t]);return[{navigatorEnabled:s,toggleNavigator:o},a]}const Bh=p.memo(function(e){const{minWidth:t,maxWidth:n,component:i}=e,r=t!=null&&n!=null&&t===n;return m.jsxs(m.Fragment,{children:[m.jsx(Mi,{id:"navigator",minWidth:t,maxWidth:n,order:1,children:m.jsx(i,{})}),m.jsx(ta,{order:2,disabled:r})]})}),$h=function(e){const{children:t,params:n}=e,i=p.useMemo(()=>n,[n]);return m.jsx(Da.Provider,{value:i,children:t})},Uh=function(e){const{children:t,devMode:n,name:i,navigate:r,params:s,structureParams:o}=e,a=p.useMemo(()=>({devMode:n,name:i,navigate:r,params:s,structureParams:o}),[n,i,r,s,o]);return m.jsx(Ma.Provider,{value:a,children:t})},Li="ACTION_IFRAME_LOADED",Gn="ACTION_IFRAME_REFRESH",qn="ACTION_IFRAME_RELOAD",Xn="ACTION_PERSPECTIVE",Yn="ACTION_VIEWPORT",na="ACTION_VISUAL_EDITING_OVERLAYS_TOGGLE",_h=(e,t)=>{switch(t.type){case Li:return e.iframe.status==="loaded"?e:{...e,iframe:{...e.iframe,status:"loaded"}};case Gn:return e.iframe.status==="refreshing"?e:{...e,iframe:{...e.iframe,status:"refreshing"}};case qn:return e.iframe.status==="reloading"?e:{...e,iframe:{...e.iframe,status:"reloading"}};case Xn:return{...e,perspective:Hn(ia,t.perspective)};case Yn:return{...e,viewport:Hn(ra,t.viewport)};case na:return zh(e,t);default:return e}},zh=(e,t)=>e.visualEditing.overlaysEnabled===t.enabled?e:{...e,visualEditing:{...e.visualEditing,overlaysEnabled:t.enabled}},Nh=Ri(Di(),!1),Wh=cn(["loading","loaded","refreshing","reloading"]),ia=Ri(cn(["published","previewDrafts"]),"previewDrafts"),ra=Ri(cn(["desktop","mobile"]),"desktop"),Hh=kt({mainDocument:Nh,iframe:kt({status:Wh}),perspective:ia,viewport:ra,visualEditing:kt({overlaysEnabled:Di()})}),Kh={mainDocument:!1,iframe:{status:"loading"},perspective:"previewDrafts",viewport:"desktop",visualEditing:{overlaysEnabled:!1}};function Gh(e){return Hn(Hh,{...Kh,...e})}const qh=Ho(Pe.iframe`
  border: 0;
  max-height: 100%;
  width: 100%;
  display: block;
`),Xh=function(e){var t;const{fontSize:n=1,onChange:i,origin:r,padding:s=3,prefix:o,suffix:a,value:c}=e,{t:l}=Be($e),{basePath:d="/"}=((t=bs())==null?void 0:t.activeWorkspace)||{},u=p.useRef(null),[f,h]=p.useState(void 0),[g,v]=p.useState(void 0),y=p.useCallback(w=>{h(w.currentTarget.value)},[]),P=p.useCallback(w=>{var T;if(w.key==="Enter"){if(f===void 0)return;const S=f.startsWith("/")||f===""?`${r}${f}`:f;if(!S.startsWith(r+"/")&&S!==r)return void v(l("preview-location-input.error",{origin:r,context:"missing-origin"}));if(!r&&(S.startsWith(`${d}/`)||S===d))return void v(l("preview-location-input.error",{basePath:d,context:"same-base-path"}));const A=S===r?r+"/":S;v(void 0),h(void 0),i(A.slice(r.length)),(T=u.current)==null||T.blur()}w.key==="Escape"&&(v(void 0),h(void 0))},[d,i,r,f,l]),x=p.useCallback(()=>{v(void 0),h(void 0)},[]);p.useEffect(()=>{v(void 0),h(void 0)},[r,c]);const b=p.useMemo(()=>({icon:ka}),[]);return m.jsx(m.Fragment,{children:m.jsx(La,{clearButton:g?b:void 0,customValidity:g,fontSize:n,onBlur:x,onClear:()=>{v(void 0),h(r+c)},onChange:y,onKeyDownCapture:P,padding:s,prefix:o,style:{zIndex:1},radius:2,ref:u,space:s,suffix:a,value:f===void 0?`${r}${c}`:f})})};function Yh(e){const{initialUrl:t,openPopup:n,previewLocationOrigin:i,previewLocationRoute:r}=e,{t:s}=Be($e),o=p.useCallback(a=>{a.preventDefault(),n(a.currentTarget.href)},[n]);return m.jsxs(m.Fragment,{children:[m.jsx(Zh,{initialUrl:t,previewLocationOrigin:i,previewLocationRoute:r}),m.jsx(Lt,{icon:Ia,text:s("share-url.menu-item.open.text"),as:"a",href:`${i}${r}`,onClick:o,rel:"opener",target:"_blank"})]})}function Zh(e){const{initialUrl:t,previewLocationOrigin:n,previewLocationRoute:i}=e,{t:r}=Be($e),{push:s}=Oa(),o=Ft({apiVersion:Bt}),a=Rn(),[c,l]=p.useState(!1);return m.jsx(Lt,{disabled:c,onClick:()=>{if(navigator==null||!navigator.clipboard)return s({closable:!0,status:"error",title:r("share-url.clipboard.status",{context:"unsupported"})}),!1;l(!0);let d,u=`${n}${i}`;const f=()=>{s({id:d,closable:!0,status:"success",title:r("share-url.clipboard.status",{context:"success"})}),l(!1)},h=g=>{s({closable:!0,status:"error",title:r("share-url.clipboard.status",{context:"failed"}),description:g.message||g.toString()}),l(!1)};if(gc(t)&&typeof ClipboardItem<"u"){const g="text/plain",v=async()=>{d=s({closable:!0,title:r("share-url.clipboard.status",{context:"copying"})});const P=await Go(o,"@sanity/presentation",typeof window>"u"?"":location.href,a==null?void 0:a.id);return u=yc(t,P.secret,i).toString(),new Blob([u],{type:g})},y=new ClipboardItem({[g]:v()});navigator.clipboard.write([y]).then(f).catch(h)}else navigator.clipboard.writeText(u).then(f).catch(h)},text:r("share-url.menu-item.copy.text"),icon:Fa})}const jn=Ho(X),En={previewDrafts:"preview-frame.perspective.previewDrafts.title",published:"preview-frame.perspective.published.title"},Jh="caution",Qh="positive",hs={previewDrafts:Ba,published:$a},ep=p.forwardRef(function(e,t){const{dispatch:n,iframe:i,initialUrl:r,loadersConnection:s,navigatorEnabled:o,onPathChange:a,onRefresh:c,openPopup:l,overlaysConnection:d,params:u,perspective:f,targetOrigin:h,toggleNavigator:g,toggleOverlay:v,viewport:y,visualEditing:{overlaysEnabled:P}}=e,{t:x}=Be($e),{devMode:b}=tt(),w=da(),T=p.useCallback(()=>n({type:Yn,viewport:"desktop"}),[n]),S=p.useCallback(()=>n({type:Yn,viewport:"mobile"}),[n]),A=i.status==="loading"||i.status==="reloading",[C,j]=p.useState(!1),R=i.status==="refreshing",[O,$]=p.useState(!1),G=A||R||d==="connecting",F=p.useMemo(()=>h===location.origin?"":h,[h]),z=p.useCallback(()=>{c(()=>{typeof t=="function"||t==null||!t.current||(n({type:qn}),t.current.src=`${h}${u.preview||"/"}`)})},[n,c,u.preview,h,t]),I=p.useCallback(()=>{typeof t=="function"||t==null||!t.current||(t.current.src=r.toString(),n({type:qn}))},[n,t,r]),Y=p.useCallback(()=>{le(!0)},[]),[N,le]=p.useState(!1),[ue,D]=p.useState(!1);p.useEffect(()=>{if(!(A||R||d!=="connecting"&&d!=="reconnecting")){const U=setTimeout(()=>{D(!0)},1e3);return()=>clearTimeout(U)}},[d,A,R]),p.useEffect(()=>{if(!A&&!R&&ue){if(d==="connected"&&($(!1),D(!1),j(!1),le(!1)),d==="connecting"){const U=setTimeout(()=>{j(!0),console.error("Unable to connect to visual editing. Make sure you've setup '@sanity/visual-editing' correctly")},$i);return()=>clearTimeout(U)}if(d==="reconnecting"){const U=setTimeout(()=>{j(!0),$(!0)},$i);return()=>clearTimeout(U)}d==="disconnected"&&$(!0)}},[A,d,R,ue]);const Z=p.useMemo(()=>{const U=new URL(u.preview||"/",h),{pathname:de,search:re}=mc(U);return`${de}${re}`},[u.preview,h]),Ee=p.useCallback(()=>{n({type:Li})},[n]);return p.useEffect(()=>{if(typeof t=="function"||t==null||!t.current)return;const U=t.current;function de(){U===document.activeElement&&U.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0}))}return window.addEventListener("blur",de),()=>{window.removeEventListener("blur",de)}},[t]),m.jsx(zf,{transition:w?{duration:0}:void 0,children:m.jsxs(fa,{delay:1e3,children:[m.jsx(ve,{flex:"none",padding:2,shadow:1,style:{position:"relative"},children:m.jsxs(X,{align:"center",style:{minHeight:0},children:[g&&m.jsx(oe,{flex:"none",marginRight:1,padding:1,children:m.jsx(st,{animate:!0,content:m.jsx(K,{size:1,children:x("preview-frame.navigator.toggle-button.tooltip")}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(be,{"aria-label":x("preview-frame.navigator.toggle-button.aria-label"),fontSize:1,icon:ha,mode:"bleed",onClick:g,padding:2,selected:o})})}),m.jsx(st,{animate:!0,content:m.jsxs(X,{align:"center",style:{whiteSpace:"nowrap"},children:[m.jsx(oe,{padding:1,children:m.jsx(K,{size:1,children:x("preview-frame.overlay.toggle-button.tooltip",{context:P?"disable":"enable"})})}),m.jsx(oe,{paddingY:1,children:m.jsx(pa,{keys:["Alt"],style:{marginTop:-4,marginBottom:-4}})})]}),fallbackPlacements:["bottom-start"],padding:1,placement:"bottom",portal:!0,children:m.jsx(ve,{as:"label",flex:"none",marginRight:1,padding:3,style:{lineHeight:0,borderRadius:999,userSelect:"none"},tone:P?"transparent":void 0,children:m.jsxs(X,{align:"center",gap:3,children:[m.jsx("div",{style:{margin:-4},children:m.jsx(ma,{checked:P,onChange:v,disabled:i.status==="loading"||d!=="connected"})}),m.jsx(oe,{children:m.jsx(K,{muted:!P,size:1,weight:"medium",children:x("preview-frame.overlay.toggle-button.text")})})]})})}),m.jsx(oe,{flex:1,marginX:1,children:m.jsx(Xh,{prefix:m.jsx(oe,{padding:1,children:m.jsx(st,{animate:!0,content:m.jsx(K,{size:1,children:i.status==="loaded"?x("preview-frame.refresh-button.tooltip"):x("preview-frame.status",{context:i.status})}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(be,{"aria-label":x("preview-frame.refresh-button.aria-label"),fontSize:1,icon:ga,mode:"bleed",loading:i.status==="reloading"||i.status==="refreshing",onClick:z,padding:2})})}),onChange:a,origin:F,suffix:m.jsx(oe,{padding:1,children:m.jsx(Ui,{button:m.jsx(be,{fontSize:1,iconRight:ya,mode:"bleed",padding:2,space:2}),id:"location-menu",menu:m.jsx(_i,{children:m.jsx(Yh,{initialUrl:r,openPopup:l,previewLocationOrigin:F,previewLocationRoute:Z})}),popover:{animate:!0,constrainSize:!0,placement:"bottom",portal:!0}})}),value:Z})}),m.jsx(X,{align:"center",flex:"none",gap:1,padding:1,children:m.jsx(Ui,{button:m.jsx(be,{fontSize:1,iconRight:va,mode:"bleed",padding:2,space:2,text:x(En[s==="connected"?f:"previewDrafts"]),loading:s==="reconnecting"&&i.status!=="loaded",disabled:s!=="connected"}),id:"perspective-menu",menu:m.jsxs(_i,{style:{maxWidth:240},children:[m.jsx(Lt,{fontSize:1,onClick:()=>n({type:Xn,perspective:"previewDrafts"}),padding:3,pressed:f==="previewDrafts",tone:Jh,children:m.jsxs(X,{align:"flex-start",gap:3,children:[m.jsx(oe,{flex:"none",children:m.jsx(K,{size:1,children:p.createElement(hs.previewDrafts)})}),m.jsxs(Le,{flex:1,space:2,children:[m.jsx(K,{size:1,weight:"medium",children:x(En.previewDrafts)}),m.jsx(K,{muted:!0,size:1,children:x("preview-frame.perspective.previewDrafts.text")})]}),m.jsx(oe,{flex:"none",children:m.jsx(K,{muted:!0,size:1,style:{opacity:f==="previewDrafts"?1:0},children:m.jsx(zi,{})})})]})}),m.jsx(Lt,{fontSize:1,onClick:()=>n({type:Xn,perspective:"published"}),padding:3,pressed:f==="published",tone:Qh,children:m.jsxs(X,{align:"flex-start",gap:3,children:[m.jsx(oe,{flex:"none",children:m.jsx(K,{size:1,children:p.createElement(hs.published)})}),m.jsxs(Le,{flex:1,space:2,children:[m.jsx(K,{size:1,weight:"medium",children:x(En.published)}),m.jsx(K,{muted:!0,size:1,children:x("preview-frame.perspective.published.text")})]}),m.jsx(oe,{flex:"none",children:m.jsx(K,{muted:!0,size:1,style:{opacity:f==="published"?1:0},children:m.jsx(zi,{})})})]})})]}),popover:{animate:!0,constrainSize:!0,placement:"bottom",portal:!0}})}),m.jsxs(X,{align:"center",flex:"none",gap:1,padding:1,children:[m.jsx(st,{animate:!0,content:m.jsx(K,{size:1,children:x("preview-frame.viewport-full-button.tooltip")}),fallbackPlacements:["bottom-start"],padding:2,placement:"bottom",portal:!0,children:m.jsx(be,{"aria-label":x("preview-frame.viewport-full-button.aria-label"),fontSize:1,icon:xa,mode:"bleed",onClick:T,padding:2,selected:y==="desktop"})}),m.jsx(st,{animate:!0,content:m.jsx(K,{size:1,children:x("preview-frame.viewport-narrow-button.tooltip")}),padding:2,placement:"bottom",portal:!0,children:m.jsx(be,{"aria-label":x("preview-frame.viewport-narrow-button.aria-label"),fontSize:1,icon:ba,mode:"bleed",onClick:S,padding:2,selected:y==="mobile"})})]})]})}),m.jsx(ve,{flex:1,tone:"transparent",children:m.jsxs(X,{align:"center",height:"fill",justify:"center",padding:y==="desktop"?0:2,sizing:"border",style:{position:"relative",cursor:G?"wait":void 0},children:[m.jsx(_f,{children:O||A||R||!ue||N?(A||d==="connecting"&&i.status!=="refreshing")&&!N?m.jsx(jn,{initial:"initial",animate:"animate",exit:"exit",variants:ps,justify:"center",align:"center",style:{inset:"0",position:"absolute"},children:m.jsxs(X,{style:{...Xt[y]},justify:"center",align:"center",direction:"column",gap:4,children:[m.jsx(Ni,{muted:!0}),m.jsx(K,{muted:!0,size:1,children:x("preview-frame.status",{context:"loading"})})]})}):O&&!N?m.jsx(jn,{initial:"initial",animate:"animate",exit:"exit",variants:tp,justify:"center",align:"center",style:{background:"var(--card-bg-color)",inset:"0",position:"absolute",borderTop:"1px solid transparent",boxShadow:"0 0 0 1px var(--card-border-color)"},children:m.jsx(ki,{flex:1,message:x("preview-frame.connection.error.text"),onRetry:I,onContinueAnyway:Y,children:b&&m.jsxs(m.Fragment,{children:[d!=="connected"&&m.jsx(ve,{padding:3,radius:2,tone:"critical",children:m.jsxs(Le,{space:3,children:[m.jsx(It,{muted:!0,size:0,children:x("preview-frame.overlay.connection-status.label")}),m.jsx(Ot,{size:1,children:x("channel.status",{context:d})})]})}),s!=="connected"&&m.jsx(ve,{padding:3,radius:2,tone:"critical",children:m.jsxs(Le,{space:3,children:[m.jsx(It,{muted:!0,size:0,children:x("preview-frame.loader.connection-status.label")}),m.jsx(Ot,{size:1,children:x("channel.status",{context:s})})]})})]})})}):null:m.jsx(jn,{initial:"initial",animate:"animate",exit:"exit",variants:ps,justify:"center",align:"center",style:{inset:"0",position:"absolute",backdropFilter:C?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",transition:"backdrop-filter 0.2s ease-in-out",WebkitBackdropFilter:C?"blur(16px) saturate(0.5) grayscale(0.5)":"blur(2px)",WebkitTransition:"-webkit-backdrop-filter 0.2s ease-in-out",zIndex:1},children:m.jsxs(X,{style:{...Xt[y]},justify:"center",align:"center",direction:"column",gap:4,children:[C&&m.jsx(be,{disabled:!0,fontSize:1,mode:"ghost",text:x("preview-frame.continue-button.text"),style:{opacity:0}}),m.jsx(ve,{radius:2,tone:C?"caution":"inherit",padding:4,shadow:1,children:m.jsxs(X,{justify:"center",align:"center",direction:"column",gap:4,children:[m.jsx(Ni,{muted:!0}),m.jsx(K,{muted:!0,size:1,children:x("preview-frame.status",C?{context:"timeout"}:{context:"connecting"})})]})}),C&&m.jsx(be,{fontSize:1,tone:"critical",onClick:Y,text:x("preview-frame.continue-button.text")})]})})}),m.jsx(qh,{ref:t,style:{pointerEvents:(A||d==="connecting"&&i.status!=="refreshing")&&!N?"none":"auto",boxShadow:"0 0 0 1px var(--card-border-color)",borderTop:"1px solid transparent"},src:r.toString(),initial:["background"],variants:np,animate:[(A||d==="connecting"&&i.status!=="refreshing")&&!N?"background":"active",A?"reloading":"idle",y,ue&&!N?"timedOut":""],onLoad:Ee})]})})]})})}),Xt={desktop:{width:"100%",height:"100%"},mobile:{width:375,height:650}},ps={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},tp={initial:{opacity:1},animate:{opacity:[0,0,1]},exit:{opacity:[1,0,0]}},np={desktop:{...Xt.desktop,boxShadow:"0 0 0 0px var(--card-border-color)"},mobile:{...Xt.mobile,boxShadow:"0 0 0 1px var(--card-border-color)"},background:{opacity:0,scale:1},idle:{scale:1},reloading:{scale:[1,1,1,.98]},active:{opacity:[0,0,1],scale:1},timedOut:{opacity:[0,0,1]}};let ms=!1;function gs(e,t){return e instanceof Function?e(t):e}function ip(e,t){const n=Array.isArray(e)?e:[e];for(e of n){let i,r=e;if(typeof e=="string")try{const s=new URL(e);i=s.origin,r=s.pathname}catch{}if(!i||t.origin===i)try{const s=Hf(r,{decode:decodeURIComponent})(t.pathname);if(s){const{params:o,path:a}=s;return{origin:i,params:o,path:a}}}catch{throw new Error(`"${e}" is not a valid route pattern`)}}}function rp(e){const{navigate:t,resolvers:n=[],path:i,previewUrl:r}=e,{state:s}=Zn(),o=Ua(),a=Ft({apiVersion:Bt}),[c,l]=p.useState(void 0),d=p.useRef(void 0),u=p.useMemo(()=>{var h,g;const v=i||((g=(h=s._searchParams)==null?void 0:h.find(([P])=>P==="preview"))==null?void 0:g[1])||"",y=typeof r=="string"?r:typeof r=="object"&&(r==null?void 0:r.origin)||location.origin;return new URL(v,y)},[i,r,s._searchParams]),f=p.useCallback(()=>{l(void 0),d.current=void 0},[]);return p.useEffect(()=>{if(n.length&&u){let x;for(const b of n){const w=ip(b.route,u);if(w){x={context:w,resolver:b};break}}if(x){const b=function(T,S){var A;if(T.resolve){const C=(A=T.resolve(S))==null?void 0:A.filter;return C?`*[${C}][0]{_id, _type}`:void 0}return"type"in T?`*[_type == "${T.type}"][0]{_id, _type}`:`*[${gs(T.filter,S)}][0]{_id, _type}`}(x.resolver,x.context),w=(h=x.resolver,g=x.context,h.resolve?(y=(v=h.resolve(g))==null?void 0:v.params)!=null?y:g.params:"type"in h?{}:(P=gs(h.params,g))!=null?P:g.params);if(b){const T=new AbortController,S={perspective:"previewDrafts",signal:T.signal};return a.fetch(b,w,S).then(A=>{(!A||d.current!==A._id)&&(l({document:A,path:u.pathname}),t==null||t({id:A==null?void 0:A._id,type:A==null?void 0:A._type}),d.current=A==null?void 0:A._id)}).catch(A=>{A instanceof Error&&A.name==="AbortError"||(l({document:void 0,path:u.pathname}),d.current=void 0)}),()=>{T.abort()}}}}var h,g,v,y,P;f()},[a,f,o,t,n,u]),c}function sp(e){var t;if(e===void 0)return;const n=(t=decodeURIComponent(e))==null?void 0:t.split(".");return n[0]==="drafts"&&n.shift(),n.join(".")}function op(e){if(e!==void 0)return As.toString(function(t){const n=[];for(const i of t.split(".")){const r=fh.exec(i);if(r){n.push(r[1],Number(r[2]));continue}const s=hh.exec(i);if(s){n.push(s[1],[Number(s[2]),Number(s[3])]);continue}const o=ph.exec(i);o?n.push(o[1],{_key:o[2]}):n.push(i)}return n}(decodeURIComponent(e)))}function Vn(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0&&t!==""&&t!==null))}function ap({initialPreviewUrl:e,routerNavigate:t,routerState:n,routerSearchParams:i,frameStateRef:r}){const s=p.useMemo(()=>{const{id:c,path:l,type:d}={id:sp((u=n).id),path:op(u.path),type:u.type};var u;return{id:c,type:d,path:l,preview:i.preview||`${e.pathname}${e.search}`,perspective:i.perspective,viewport:i.viewport,inspect:i.inspect,rev:i.rev,prefersLatestPublished:i.prefersLatestPublished,since:i.since,template:i.template,templateParams:i.templateParams,view:i.view,pathKey:i.pathKey,instruction:i.instruction,comment:i.comment}},[n,i,e]),o=p.useMemo(()=>Vn({inspect:s.inspect,path:s.path,rev:s.rev,prefersLatestPublished:s.prefersLatestPublished,since:s.since,template:s.template,templateParams:s.templateParams,view:s.view,pathKey:s.pathKey,instruction:s.instruction,comment:s.comment}),[s.comment,s.inspect,s.instruction,s.path,s.pathKey,s.prefersLatestPublished,s.rev,s.since,s.template,s.templateParams,s.view]),a=p.useRef(n);return p.useEffect(()=>{a.current=n},[n]),{structureParams:o,navigate:p.useCallback((c,l={},d)=>{c.id&&(c.id=Jn(c.id));const{_searchParams:u,...f}=a.current,h=(u||[]).reduce((P,[x,b])=>(P[x]=b,P),{}),g=Vn({...f,...c}),v=Vn({...h,...l});f.id!==g.id&&(delete v.template,delete v.templateParams),g._searchParams=Object.entries(v).reduce((P,[x,b])=>[...P,[x,b]],[]);const y=d??v.preview===r.current.url;t(g,{replace:y})},[t,r]),params:s}}function cp(e,t,n){var i,r;const s=Ft({apiVersion:Bt}),o=bs(),a=((i=o==null?void 0:o.activeWorkspace)==null?void 0:i.basePath)||"/",c=((r=o==null?void 0:o.activeWorkspace)==null?void 0:r.name)||"default",l=function(u,f,h,g){const[v,y]=p.useState(()=>g||""),P=p.useRef(0);p.useEffect(()=>{if(v&&g)return window.clearTimeout(P.current),()=>{P.current=window.setTimeout(()=>{y("")},100)}},[v,g]);const x=Rn();return p.useMemo(()=>["@sanity/presentation",f,h,u,x==null?void 0:x.id,lp,v],[f,x==null?void 0:x.id,u,h,v])}(t,a,c,n),d=function(u,f){const h=Ft({apiVersion:Bt}),g=Rn(),[v,y]=p.useState(""),P=u?ts(async()=>await Go(h,"@sanity/presentation",typeof window>"u"?"":location.href,g==null?void 0:g.id),[...f,v]):null;return p.useEffect(()=>{if(!P)return;const x=setTimeout(()=>{p.startTransition(()=>y(P.expiresAt.toString()))},P.expiresAt.getTime()-Date.now());return()=>clearTimeout(x)},[P]),(P==null?void 0:P.secret)||null}(typeof e=="object"||typeof e=="function",l);return ts(async()=>{if(typeof e=="string"){const f=new URL(e,location.origin);let h=f;try{if(n){const g=new URL(n,f);g.origin===f.origin&&(h=g)}else if(document.referrer){const g=new URL(document.referrer);g.origin===f.origin&&(h=g)}}catch{}return location.origin!==h.origin||!h.pathname.startsWith(`${a}/`)&&h.pathname!==a?h:f}const u=await(typeof e=="object"?Zf(e):e)({client:s,previewUrlSecret:d,previewSearchParam:n,referrer:typeof document>"u"?null:document.referrer,studioBasePath:a});return new URL(u,location.origin)},[...l,d])}const lp=Symbol(),up=p.lazy(()=>vs(()=>import("./LoaderQueries-67e8ca8d.js"),["static/LoaderQueries-67e8ca8d.js","static/sanity-a3863ec7.js","static/DisplayedDocumentBroadcaster-df923b97.js"])),dp=p.lazy(()=>vs(()=>import("./PostMessageRefreshMutations-834c96df.js"),["static/PostMessageRefreshMutations-834c96df.js","static/sanity-a3863ec7.js"])),fp=Pe(X)`
  overflow-x: auto;
`;function hp(e){var t,n,i,r;const{previewUrl:s,components:o}=(t=e.tool.options)!=null?t:{},a=e.tool.name||wa,{unstable_navigator:c}=o||{},{navigate:l,state:d}=Zn(),u=xs(Object.fromEntries(d._searchParams||[])),f=cp(s||"/",a,u.preview||null),[h]=p.useState(()=>{var M;const k=(M=e.tool.options)==null?void 0:M.devMode;return typeof k=="function"?k():typeof k=="boolean"?k:typeof window<"u"&&window.location.hostname==="localhost"}),g=p.useMemo(()=>f.origin,[f.origin]),v=p.useRef(null),[y,P]=p.useState(),[x,b]=p.useState({}),w=p.useRef({title:void 0,url:void 0}),{navigate:T,params:S,structureParams:A}=ap({initialPreviewUrl:f,routerNavigate:l,routerState:d,routerSearchParams:u,frameStateRef:w}),C=p.useMemo(()=>Jo(T,50),[T]),[j,R]=p.useReducer(_h,{perspective:S.perspective,viewport:S.viewport},Gh),[O,$]=function(M,k){if(M!=="published"&&M!=="previewDrafts")throw new Error(`Invalid perspective: ${M}`);const[q,L]=p.useState({}),[V,pe]=p.useState({}),fe=p.useRef(""),it=p.useCallback((Re,Q,De=[])=>{const me=De.filter(xe=>"_projectId"in xe&&xe._projectId?(ms||(console.warn("Cross dataset references are not supported yet, ignoring source document",xe),ms=!0),!1):xe);(Q==="published"?L:pe)(xe=>{const rt={};for(const Pt of me)rt[Pt._id]=Pt;if(fe.current!==k.current.url)return fe.current=k.current.url,{[Re]:rt};const wt=xe[Re];return Ya(wt,rt)?xe:{...xe,[Re]:rt}})},[k]);return[p.useMemo(()=>{const Re=Object.values(M==="published"?q:V).reduce((Q,De)=>(Object.values(De).forEach(me=>{Q[me._id]=me}),Q),{});return Object.values(Re)},[M,V,q]),it]}(j.perspective,w),G=Pa(),F=Sa(),z=rp({resolvers:(i=(n=e.tool.options)==null?void 0:n.resolve)==null?void 0:i.mainDocuments,previewUrl:(r=e.tool.options)==null?void 0:r.previewUrl,path:S.preview,navigate:T});p.useEffect(()=>{(j.perspective!==S.perspective||j.viewport!==S.viewport)&&C({},{perspective:j.perspective==="previewDrafts"?void 0:j.perspective,viewport:j.viewport==="desktop"?void 0:j.viewport})},[S.perspective,j.perspective,C,j.viewport,S.viewport,S.rev,S.prefersLatestPublished]);const[I,Y]=p.useState("connecting"),[N,le]=p.useState("connecting"),[ue,D]=p.useState("connecting"),[Z]=p.useState(()=>new Set),Ee=p.useCallback(M=>{const k=window.open(M,"_blank");k&&Z.add(k)},[Z]);p.useEffect(()=>{if(Z.size&&y)for(const M of Z)M&&"closed"in M&&!M.closed&&y.addSource(M)},[y,Z,Z.size]);const U=p.useRef(j.perspective);p.useEffect(()=>{U.current=j.perspective},[j.perspective]),p.useEffect(()=>{var M;const k=(M=v.current)==null?void 0:M.contentWindow;if(!k)return;const q=function(L){const{destroy:V,send:pe}=rs(L),fe=new Set,it=new WeakMap,Re=new Set;return{destroy:()=>{V();for(const Q of Re)Q()},send:(Q,...De)=>{pe(Q,...De);for(const me of fe)me&&"closed"in me&&!me.closed&&it.has(me)&&it.get(me)(Q,...De)},addSource(Q){if(fe.has(Q))return;if(!("closed"in Q))throw console.warn("Source is unsupported",{source:Q}),new Error("Source is unsupported");if(Q.closed)throw new Error("Source is closed");const{send:De,destroy:me}=rs({...L,target:Q,connectTo:L.connectTo.map(xe=>{const{onStatusUpdate:rt,onEvent:wt,...Pt}=xe;return{...Pt,onEvent:wt?(...Bi)=>{const[dn]=Bi;if(dn!=="preview-kit/documents"&&dn!=="overlay/navigate"&&dn!=="loader/documents")return wt(...Bi)}:void 0}})});Re.add(me),it.set(Q,De),fe.add(Q)}}}({id:"presentation",target:k,targetOrigin:g,connectTo:[{id:"overlays",heartbeat:!0,onStatusUpdate:Y,onEvent(L,V){if(L!=="visual-editing/focus"&&L!=="overlay/focus"||!("id"in V))if(L==="visual-editing/navigate"||L==="overlay/navigate"){const{title:pe,url:fe}=V;w.current.url!==fe&&C({},{preview:fe}),w.current={title:pe,url:fe}}else L==="visual-editing/meta"?w.current.title=V.title:L==="visual-editing/toggle"||L==="overlay/toggle"?R({type:na,enabled:V.enabled}):L==="visual-editing/documents"?$("visual-editing",V.perspective,V.documents):L==="visual-editing/refreshing"&&V.source==="manual"?clearTimeout(Oi.current):L==="visual-editing/refreshing"&&V.source==="mutation"?R({type:Gn}):L==="visual-editing/refreshed"&&R({type:Li});else C({type:V.type,id:V.id,path:V.path},{prefersLatestPublished:"isDraft"in V||U.current==="previewDrafts"?void 0:"true"})}},{id:"loaders",heartbeat:!0,onStatusUpdate:le,onEvent(L,V){if(L==="loader/documents"&&V.projectId===G&&V.dataset===F)$("loaders",V.perspective,V.documents);else if(L==="loader/query-listen"&&V.projectId===G&&V.dataset===F){if(typeof V.heartbeat=="number"&&V.heartbeat<fn)throw new Error(`Loader query listen heartbeat interval must be at least ${fn}ms`);b(pe=>{var fe;return{...pe,[mh(V.query,V.params)]:{perspective:V.perspective,query:V.query,params:V.params,receivedAt:Date.now(),heartbeat:(fe=V.heartbeat)!=null&&fe}}})}}},{id:"preview-kit",heartbeat:!0,onStatusUpdate:D,onEvent(L,V){L==="preview-kit/documents"&&V.projectId===G&&V.dataset===F&&$("preview-kit",V.perspective,V.documents)}}]});return P(q),()=>{q.destroy(),P(void 0)}},[F,G,$,C,g]),p.useEffect(()=>{const M=setInterval(()=>b(k=>{if(Object.keys(k).length<1)return k;const q=Date.now();if(!Object.values(k).some(V=>V.heartbeat!==!1&&q>V.receivedAt+V.heartbeat))return k;const L={};for(const[V,pe]of Object.entries(k))pe.heartbeat!==!1&&q>pe.receivedAt+pe.heartbeat||(L[V]=pe);return L}),fn);return()=>clearInterval(M)},[]);const de=p.useCallback(M=>{C({path:As.toString(M)},{},!0)},[C]),re=p.useCallback(M=>{const k=new URL(M,f.origin),q=k.pathname+k.search;k.origin===f.origin&&q!==S.preview&&C({},{preview:q})},[f,S,C]),Ve=p.useCallback(M=>{C({},M)},[C]);p.useEffect(()=>{y==null||y.send("overlays","presentation/perspective",{perspective:j.perspective})},[y,j.perspective]),p.useEffect(()=>{S.id&&S.path?y==null||y.send("overlays","presentation/focus",{id:S.id,path:S.path}):y==null||y.send("overlays","presentation/blur",void 0)},[y,S.id,S.path]),p.useEffect(()=>{j.perspective==="published"&&S.id&&!S.rev&&!S.prefersLatestPublished&&C({},{prefersLatestPublished:"true"})},[C,S.id,S.prefersLatestPublished,S.rev,j.perspective]),p.useEffect(()=>{w.current.url&&S.preview&&w.current.url!==S.preview&&(w.current.url=S.preview,I!=="connected"&&v.current?v.current.src=`${g}${S.preview}`:y==null||y.send("overlays","presentation/navigate",{url:S.preview,type:"replace"}))},[y,I,g,S.preview]);const ne=p.useCallback(()=>y==null?void 0:y.send("overlays","presentation/toggleOverlay",void 0),[y]),[ae,se]=p.useState(null);p.useEffect(()=>{const M=q=>{os(q)&&ne()},k=q=>{var L;os(q)&&ne(),L=q,["mod","\\"].every(V=>ss[V]?L[ss[V]]:L.key===V.toUpperCase())&&ne()};return window.addEventListener("keydown",k),window.addEventListener("keyup",M),()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",M)}},[ne]);const[J,bt]=p.useState(null),[{navigatorEnabled:Ii,toggleNavigator:sa},oa]=Fh({unstable_navigator:c}),un=p.useRef(S.id);p.useEffect(()=>{S.rev&&un.current&&S.id!==un.current&&C({},{rev:void 0}),un.current=S.id});const Oi=p.useRef(),aa=p.useCallback(M=>{if(R({type:Gn}),y)return Oi.current=window.setTimeout(M,300),void y.send("overlays","presentation/refresh",{source:"manual",livePreviewEnabled:ue==="connected"||N==="connected"});M()},[y,N,ue]),Fi=Ta(),ca=p.useCallback(({id:M,type:k,path:q})=>{if(w.current.url)return{title:w.current.title||w.current.url,name:"edit",params:{id:M,path:q,type:k,inspect:Ca,workspace:Fi.name,mode:Aa,preview:S.preview}}},[S.preview,Fi.name]);return m.jsxs(m.Fragment,{children:[m.jsx(Uh,{devMode:h,name:a,navigate:C,params:S,structureParams:A,children:m.jsx(Oh,{navigate:C,children:m.jsx($h,{params:S,children:m.jsx(fp,{height:"fill",children:m.jsxs(bh,{children:[m.jsx(oa,{}),m.jsx(Mi,{id:"preview",minWidth:325,defaultSize:Ii?50:75,order:3,children:m.jsx(X,{direction:"column",flex:1,height:"fill",ref:bt,children:m.jsx(ja,{element:J,children:m.jsx(ep,{dispatch:R,iframe:j.iframe,initialUrl:f,loadersConnection:N,navigatorEnabled:Ii,onPathChange:re,onRefresh:aa,openPopup:Ee,overlaysConnection:I,params:S,perspective:j.perspective,ref:v,targetOrigin:g,toggleNavigator:sa,toggleOverlay:ne,viewport:j.viewport,visualEditing:j.visualEditing})})})}),m.jsx(Ih,{mainDocumentState:z,params:S,documentsOnPage:O,getCommentIntent:ca,onFocusPath:de,onStructureParams:Ve,setDisplayedDocument:se,structureParams:A})]})})})})}),y&&m.jsx(p.Suspense,{children:m.jsx(up,{channel:y,liveQueries:x,perspective:j.perspective,liveDocument:ae,documentsOnPage:O})}),y&&S.id&&S.type&&m.jsx(p.Suspense,{children:m.jsx(dp,{channel:y,id:S.id,type:S.type,loadersConnection:N,previewKitConnection:ue})})]})}const wp=Object.freeze(Object.defineProperty({__proto__:null,default:hp},Symbol.toStringTag,{value:"Module"}));export{Wi as D,wp as P,tc as a,gp as g,yp as p,vp as r,nc as t,hn as w};
